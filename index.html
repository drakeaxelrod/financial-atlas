<!DOCTYPE html>
<html lang="en">
  <!--
MIT License

Copyright (c) 2025 Drake Axelrod

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Financial Atlas – Your Financial Independence & Retirement Planner</title>
    <meta
      name="description"
      content="FIRE calculator, compound interest tools, lazy portfolio strategies, and market guidance—all in a single-page financial planning app." />
    <meta
      name="keywords"
      content="FIRE calculator, financial independence, retirement planner, compound interest, lazy portfolio, personal finance, investing" />
    <meta name="author" content="Drake Axelrod" />

    <!-- Favicon using FontAwesome calculator icon -->
    <link
      rel="icon"
      href="https://raw.githubusercontent.com/drakeaxelrod/financial-atlas/refs/heads/main/piggybank.svg"
      type="image/svg+xml" />

    <!-- Essential CDNs -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/money.js/0.2.0/money.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/14.5.3/math.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet" />    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --secondary-light: #94a3b8;
            --accent: #f59e0b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --surface: rgba(255, 255, 255, 0.9);
            --surface-secondary: rgba(248, 250, 252, 0.9);
            --surface-tertiary: rgba(241, 245, 249, 0.9);
            --border: rgba(226, 232, 240, 0.8);
            --border-light: rgba(241, 245, 249, 0.8);
            --text: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --text-light: #94a3b8;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            --radius: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.25rem;
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 0.75rem;
            --spacing-lg: 1rem;
            --spacing-xl: 1.5rem;
            --spacing-2xl: 2rem;
        }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 25%, #f1f5f9 50%, #e2e8f0 75%, #f8fafc 100%);
        background-attachment: fixed;
        color: var(--text);
        line-height: 1.6;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        position: relative;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background:
          radial-gradient(circle at 20% 20%, rgba(37, 99, 235, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 60% 40%, rgba(245, 158, 11, 0.05) 0%, transparent 50%);
        z-index: -1;
        pointer-events: none;
      }

      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: var(--spacing-sm) var(--spacing-lg);
      }

      .card {
        background: var(--surface);
        backdrop-filter: blur(10px);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        position: relative;
      }

      .card:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-1px);
        border-color: var(--border-light);
        background: rgba(255, 255, 255, 0.95);
      }

      .card-compact {
        padding: var(--spacing-md);
      }

      .card-header {
        padding: var(--spacing-lg);
        border-bottom: 1px solid var(--border-light);
        background: var(--surface-secondary);
      }

      .card-body {
        padding: var(--spacing-lg);
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-xs);
        padding: var(--spacing-sm) var(--spacing-lg);
        border-radius: var(--radius);
        font-weight: 600;
        font-size: 0.875rem;
        line-height: 1.25;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;
        cursor: pointer;
        text-decoration: none;
        outline: none;
        min-height: 2.25rem;
        white-space: nowrap;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        color: white;
        box-shadow: 0 2px 8px rgba(37, 99, 235, 0.25);
      }

      .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
        background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
      }

      .btn-secondary {
        background: var(--surface);
        color: var(--text-secondary);
        border: 1.5px solid var(--border);
      }

      .btn-secondary:hover {
        background: var(--surface-secondary);
        border-color: var(--secondary);
        color: var(--text);
        transform: translateY(-1px);
      }

      .btn-ghost {
        background: transparent;
        color: var(--text-secondary);
        border: none;
        padding: var(--spacing-xs) var(--spacing-sm);
      }

      .btn-ghost:hover {
        background: var(--surface-secondary);
        color: var(--text);
      }

      .btn-icon {
        width: 2.25rem;
        height: 2.25rem;
        padding: 0;
        border-radius: var(--radius);
      }

      .input-field {
        width: 100%;
        padding: var(--spacing-sm) var(--spacing-md);
        border: 1.5px solid var(--border);
        border-radius: var(--radius);
        background: var(--surface);
        color: var(--text);
        font-size: 0.875rem;
        line-height: 1.25;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        outline: none;
      }

      .input-field:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        background: var(--surface);
      }

      .input-field::placeholder {
        color: var(--text-muted);
      }

      .tabs {
        display: flex;
        background: var(--surface);
        border-radius: var(--radius);
        padding: var(--spacing-xs);
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        margin-bottom: var(--spacing-xl);
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }

      .tabs::-webkit-scrollbar {
        display: none;
      }

      .tab {
        flex: 1;
        min-width: max-content;
        padding: var(--spacing-sm) var(--spacing-md);
        text-align: center;
        border-radius: calc(var(--radius) - var(--spacing-xs));
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 500;
        font-size: 0.875rem;
        color: var(--text-secondary);
        white-space: nowrap;
        position: relative;
        overflow: hidden;
      }

      .tab::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
      }

      .tab.active {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        color: white;
        box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        transform: translateY(-1px);
      }

      .tab.active::before {
        opacity: 1;
      }

      .tab:hover:not(.active) {
        background: var(--surface-secondary);
        color: var(--text);
        transform: translateY(-1px);
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-xl);
      }

      .stat-card {
        background: var(--surface);
        border-radius: var(--radius);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        border-color: var(--border-light);
      }

      .stat-card:hover::before {
        transform: scaleX(1);
      }

      .stat-icon {
        width: 2.75rem;
        height: 2.75rem;
        border-radius: var(--radius);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.125rem;
        margin-bottom: var(--spacing-md);
        position: relative;
      }

      .stat-value {
        font-size: 1.625rem;
        font-weight: 700;
        color: var(--text);
        margin-bottom: var(--spacing-xs);
        line-height: 1.1;
        letter-spacing: -0.025em;
      }

      .stat-label {
        font-size: 0.8125rem;
        color: var(--text-secondary);
        font-weight: 500;
        line-height: 1.2;
        text-transform: uppercase;
        letter-spacing: 0.025em;
      }

      .chart-container {
        background: var(--surface);
        border-radius: var(--radius);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        margin-bottom: var(--spacing-xl);
        position: relative;
        overflow: hidden;
      }

      .chart-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 50%, var(--success) 100%);
      }

      .chart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-lg);
        padding-bottom: var(--spacing-sm);
        border-bottom: 1px solid var(--border-light);
      }

      .chart-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text);
        margin: 0;
      }

      .chart-subtitle {
        font-size: 0.875rem;
        color: var(--text-muted);
        margin-top: var(--spacing-xs);
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--spacing-lg);
        margin-bottom: var(--spacing-xl);
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs);
      }

      .form-label {
        font-weight: 600;
        color: var(--text);
        font-size: 0.875rem;
        line-height: 1.2;
      }

      .form-help {
        font-size: 0.75rem;
        color: var(--text-muted);
        margin-top: var(--spacing-xs);
      }

      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .card {
        background: var(--surface);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        transition: all 0.3s ease;
        overflow: hidden;
      }

      .card:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-1px);
      }

      /* Optimized market data cards */
      .market-card {
        background: var(--surface);
        backdrop-filter: blur(10px);
        border-radius: var(--radius);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .market-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 50%, var(--success) 100%);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
      }

      .market-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        border-color: var(--border-light);
        background: rgba(255, 255, 255, 0.95);
      }

      .market-card:hover::before {
        transform: scaleX(1);
      }

      .market-card.positive {
        border-left: 3px solid var(--success);
      }

      .market-card.negative {
        border-left: 3px solid var(--danger);
      }

      .market-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: var(--spacing-lg);
        margin-bottom: var(--spacing-xl);
      }

      .price-positive {
        color: var(--success);
        background: rgba(16, 185, 129, 0.1);
        padding: var(--spacing-xs) var(--spacing-sm);
        border-radius: var(--radius);
        font-weight: 600;
      }

      .price-negative {
        color: var(--danger);
        background: rgba(239, 68, 68, 0.1);
        padding: var(--spacing-xs) var(--spacing-sm);
        border-radius: var(--radius);
        font-weight: 600;
      }

      /* Header improvements */
      .header-gradient {
        background: #ffffff;
        box-shadow: var(--shadow-lg);
      }

      .header-title {
        color: var(--primary);
        font-weight: 800;
        letter-spacing: -0.025em;
      }

      /* Compact ticker */
      .ticker-container {
        background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
        color: white;
        padding: 0.75rem 0;
        overflow: hidden;
        position: relative;
        border-bottom: 1px solid var(--border);
      }

      .ticker-content {
        display: flex;
        animation: scroll-left 45s linear infinite;
        gap: 2rem;
        white-space: nowrap;
        font-size: 0.875rem;
        font-weight: 500;
      }

      .ticker-item {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0 1rem;
        flex-shrink: 0;
      }

      /* Responsive optimizations */
      @media (max-width: 768px) {
        .stats-grid {
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-md);
        }

        .form-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-md);
        }

        .market-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-md);
        }

        .container {
          padding: var(--spacing-xs) var(--spacing-md);
        }

        .stat-card {
          padding: var(--spacing-md);
        }

        .chart-container {
          padding: var(--spacing-md);
        }

        .card-body {
          padding: var(--spacing-md);
        }

        .tab {
          font-size: 0.8125rem;
          padding: var(--spacing-xs) var(--spacing-sm);
        }
      }

      @media (max-width: 480px) {
        .stats-grid {
          grid-template-columns: 1fr;
        }

        .tabs {
          flex-direction: column;
          gap: var(--spacing-xs);
        }

        .tab {
          font-size: 0.8125rem;
          padding: var(--spacing-sm);
          text-align: left;
        }

        .container {
          padding: var(--spacing-xs);
        }

        .market-card {
          padding: var(--spacing-md);
        }

        .header-gradient .container .flex {
          flex-direction: column;
          align-items: flex-start;
          gap: var(--spacing-sm);
          height: auto;
          padding: var(--spacing-md) 0;
        }
      }

      /* Animation enhancements */
      .pulse-dot {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      .hover-scale {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .hover-scale:hover {
        transform: scale(1.02);
      }

      .animate-in {
        animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        opacity: 0;
        transform: translateY(20px);
      }

      @keyframes slideInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Market heat map styles */
      .market-heat-map {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
        gap: var(--spacing-xs);
        margin: var(--spacing-lg) 0;
      }

      .heat-item {
        aspect-ratio: 1;
        border-radius: var(--radius);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
        text-align: center;
        color: white;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }

      .heat-item::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
        transform: translateX(-100%);
        transition: transform 0.6s ease;
      }

      .heat-item:hover::before {
        transform: translateX(100%);
      }

      .heat-positive-strong { background: linear-gradient(135deg, #059669, #10b981); }
      .heat-positive-medium { background: linear-gradient(135deg, #10b981, #34d399); }
      .heat-positive-weak { background: linear-gradient(135deg, #34d399, #6ee7b7); }
      .heat-neutral { background: linear-gradient(135deg, #64748b, #94a3b8); }
      .heat-negative-weak { background: linear-gradient(135deg, #f87171, #fca5a5); }
      .heat-negative-medium { background: linear-gradient(135deg, #ef4444, #f87171); }
      .heat-negative-strong { background: linear-gradient(135deg, #dc2626, #ef4444); }

      /* Enhanced loading states */
      .skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }

      .loading-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: var(--spacing-lg);
      }

      .loading-card {
        background: var(--surface);
        border-radius: var(--radius);
        padding: var(--spacing-lg);
        border: 1px solid var(--border);
      }

      .loading-line {
        height: 1rem;
        background: var(--border);
        border-radius: var(--radius);
        margin-bottom: var(--spacing-sm);
      }

      .loading-line.short { width: 60%; }
      .loading-line.medium { width: 80%; }
      .loading-line.long { width: 100%; }

      /* Notification improvements */
      .notification {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow-xl);
        backdrop-filter: blur(10px);
        border-left: 4px solid var(--primary);
      }

      .notification.success {
        border-left-color: var(--success);
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), var(--surface));
      }

      .notification.warning {
        border-left-color: var(--warning);
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.05), var(--surface));
      }

      .notification.error {
        border-left-color: var(--danger);
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.05), var(--surface));
      }

      .stat-icon {
        width: 3rem;
        height: 3rem;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        margin-bottom: 1rem;
      }

      .stat-value {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--text);
        margin-bottom: 0.25rem;
      }

      .stat-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .chart-container {
        background: var(--surface);
        border-radius: var(--radius);
        padding: 1.5rem;
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        margin-bottom: 2rem;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .form-label {
        font-weight: 600;
        color: var(--text);
        font-size: 0.875rem;
      }

      .progress-bar {
        width: 100%;
        height: 0.5rem;
        background: var(--border);
        border-radius: 0.25rem;
        overflow: hidden;
        margin: 1rem 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
        transition: width 1s ease;
        position: relative;
      }

      .progress-fill::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      /* Loading and animation states */
      .loading-spinner {
        width: 2rem;
        height: 2rem;
        border: 2px solid var(--border);
        border-top: 2px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .slide-in {
        animation: slideIn 0.3s ease-out;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* Ticker animation */
      @keyframes scroll-left {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-100%);
        }
      }

      /* Compact layout helpers */
      .compact-layout {
        padding: 0.5rem;
      }

      .compact-layout .stats-grid {
        gap: 0.625rem;
      }

      .compact-layout .stat-card {
        padding: 0.875rem;
      }

      .compact-layout .chart-container {
        padding: 0.875rem;
      }

      /* Market data specific styles */
      .market-status {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.75rem;
        font-weight: 500;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        background: var(--surface-secondary);
        color: var(--text-secondary);
      }

      .market-status.open {
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
      }

      .market-status.closed {
        background: rgba(239, 68, 68, 0.1);
        color: #ef4444;
      }

      .market-status.pre-market {
        background: rgba(245, 158, 11, 0.1);
        color: #f59e0b;
      }

      /* Improved tooltips */
      .tooltip {
        position: relative;
        cursor: help;
      }

      .tooltip .tooltip-content {
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: var(--text);
        color: white;
        padding: 0.5rem 0.75rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        white-space: nowrap;
        z-index: 10;
        opacity: 0;
        visibility: hidden;
        transition: all 0.2s ease;
        pointer-events: none;
      }

      .tooltip:hover .tooltip-content {
        opacity: 1;
        visibility: visible;
      }

      /* Mini chart styles */
      .chart-mini {
        height: 40px;
        width: 100%;
        opacity: 0.8;
        transition: opacity 0.2s ease;
      }

      .market-card:hover .chart-mini {
        opacity: 1;
      }

      /* Search box optimization */
      .search-box {
        position: relative;
        margin-bottom: 1rem;
      }

      .search-input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        border: 2px solid var(--border);
        border-radius: var(--radius);
        background: var(--surface);
        color: var(--text);
        font-size: 0.875rem;
        transition: all 0.3s ease;
        outline: none;
      }

      .search-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
      }

      .search-icon {
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-muted);
        z-index: 1;
      }

      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--surface);
        border: 1px solid var(--border);
        border-top: none;
        border-radius: 0 0 var(--radius) var(--radius);
        box-shadow: var(--shadow);
        z-index: 10;
        max-height: 300px;
        overflow-y: auto;
      }

      .search-result {
        padding: 0.75rem;
        cursor: pointer;
        transition: background-color 0.2s ease;
        border-bottom: 1px solid var(--border);
      }

      .search-result:hover {
        background: var(--surface-secondary);
      }

      .search-result:last-child {
        border-bottom: none;
      }

      .pulse-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #ef4444;
        position: relative;
        animation: pulse-dot 2s infinite;
      }

      .pulse-dot::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: #ef4444;
        animation: pulse-ring 2s infinite;
      }

      @keyframes pulse-dot {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      @keyframes pulse-ring {
        0% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 1;
        }
        100% {
          transform: translate(-50%, -50%) scale(2.5);
          opacity: 0;
        }
      }

      .number-counter {
        font-feature-settings: "tnum";
        font-variant-numeric: tabular-nums;
      }

      .market-heat-map {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
        gap: 4px;
        margin: 1rem 0;
      }

      .heat-cell {
        aspect-ratio: 1;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
        color: white;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .heat-cell:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .heat-positive-weak {
        background: #dcfce7;
        color: #166534;
      }
      .heat-positive-medium {
        background: #bbf7d0;
        color: #14532d;
      }
      .heat-positive-strong {
        background: #16a34a;
        color: white;
      }
      .heat-negative-weak {
        background: #fee2e2;
        color: #991b1b;
      }
      .heat-negative-medium {
        background: #fecaca;
        color: #7f1d1d;
      }
      .heat-negative-strong {
        background: #dc2626;
        color: white;
      }
      .heat-neutral {
        background: #f3f4f6;
        color: #374151;
      }

      .ticker-performance {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
      }

      .ticker-performance:hover {
        background: rgba(0, 0, 0, 0.05);
      }

      .performance-bar {
        height: 4px;
        border-radius: 2px;
        transition: width 0.5s ease;
      }

      .performance-positive {
        background: #10b981;
      }
      .performance-negative {
        background: #ef4444;
      }

      /* Enhanced stock cards */
      .stock-card-advanced {
        background: var(--surface);
        border-radius: var(--radius);
        padding: 1.5rem;
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .stock-card-advanced::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--primary), var(--primary-light));
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      .stock-card-advanced:hover::before {
        transform: scaleX(1);
      }

      .stock-card-advanced:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .metric-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        padding: 0.25rem 0.5rem;
        border-radius: 0.375rem;
        font-size: 0.75rem;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .metric-badge.positive {
        background: #ecfdf5;
        color: #065f46;
      }

      .metric-badge.negative {
        background: #fef2f2;
        color: #991b1b;
      }

      .metric-badge.neutral {
        background: #f8fafc;
        color: #475569;
      }

      /* Loading states */
      .skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      .skeleton-text {
        height: 1em;
        border-radius: 0.25rem;
        margin: 0.25rem 0;
      }

      .skeleton-button {
        height: 2.5rem;
        border-radius: 0.5rem;
        width: 100%;
      }

      /* Toast notifications */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        border: 1px solid #e5e7eb;
        padding: 16px;
        max-width: 400px;
        z-index: 1000;
        animation: slideInRight 0.3s ease-out;
      }

      .toast.success {
        border-left: 4px solid #10b981;
      }

      .toast.error {
        border-left: 4px solid #ef4444;
      }

      .toast.info {
        border-left: 4px solid #3b82f6;
      }

      .toast.warning {
        border-left: 4px solid #f59e0b;
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .toast-exit {
        animation: slideOutRight 0.3s ease-in;
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      /* Responsive improvements */
      @media (max-width: 768px) {
        .market-heat-map {
          grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
        }

        .heat-cell {
          font-size: 0.625rem;
        }

        .stock-card-advanced {
          padding: 1rem;
        }

        .toast {
          right: 10px;
          left: 10px;
          max-width: none;
        }
      }

      .loading-spinner {
        display: inline-block;
        width: 1.25rem;
        height: 1.25rem;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: currentColor;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .fade-in {
        animation: fadeIn 0.6s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .slide-in {
        animation: slideIn 0.8s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .pulse-subtle {
        animation: pulseSubtle 2.5s ease-in-out infinite;
      }

      @keyframes pulseSubtle {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.02);
          opacity: 0.95;
        }
      }

      .shimmer {
        position: relative;
        overflow: hidden;
      }

      .shimmer::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .card-hover-lift:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .gradient-border {
        background: linear-gradient(135deg, var(--primary), var(--primary-light));
        padding: 2px;
        border-radius: calc(var(--radius) + 2px);
      }

      .gradient-border > div {
        background: var(--surface);
        border-radius: var(--radius);
        padding: 1.5rem;
      }

      /* Market Ticker Styles */
      .ticker-container {
        overflow: hidden;
        white-space: nowrap;
        background: linear-gradient(135deg, var(--primary-dark), var(--primary));
        color: white;
        padding: 0.5rem 0;
        position: relative;
      }

      .ticker-content {
        display: inline-block;
        animation: scroll-ticker 60s linear infinite;
        padding-left: 100%;
      }

      @keyframes scroll-ticker {
        0% {
          transform: translate3d(0, 0, 0);
        }
        100% {
          transform: translate3d(-100%, 0, 0);
        }
      }

      .ticker-item {
        display: inline-block;
        margin-right: 3rem;
        font-size: 0.875rem;
        font-weight: 500;
      }

      .market-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 1.5rem;
      }

      .stock-card {
        background: var(--surface);
        border-radius: var(--radius);
        padding: 1.5rem;
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        transition: box-shadow 0.3s ease, transform 0.3s ease;
        position: relative;
        overflow: hidden;
        opacity: 1;
        transform: translateY(0);
      }

      .stock-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .stock-card.positive {
        border-left: 4px solid var(--success);
      }

      .stock-card.negative {
        border-left: 4px solid var(--danger);
      }

      .stock-card.loading {
        opacity: 0.7;
        pointer-events: none;
      }

      .price-positive {
        color: var(--success);
      }

      .price-negative {
        color: var(--danger);
      }

      .chart-mini {
        width: 100%;
        height: 60px;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(16, 185, 129, 0.1));
        border-radius: 0.5rem;
        position: relative;
        overflow: hidden;
        border: 1px solid var(--border);
      }

      .chart-mini canvas {
        width: 100% !important;
        height: 100% !important;
      }

      /* Search Box Styles */
      .search-box {
        position: relative;
        max-width: 300px;
      }

      .search-input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        font-size: 0.875rem;
        transition: all 0.3s ease;
        background: white;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .search-icon {
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-secondary);
        font-size: 0.875rem;
      }

      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow-lg);
        max-height: 200px;
        overflow-y: auto;
        z-index: 50;
        margin-top: 0.25rem;
      }

      .search-result {
        padding: 0.75rem;
        cursor: pointer;
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--border);
      }

      .search-result:hover {
        background: var(--surface-secondary);
      }

      .search-result:last-child {
        border-bottom: none;
      }

      /* Heat Map Styles */
      .market-heat-map {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
        gap: 0.5rem;
        margin-top: 1rem;
      }

      .heat-cell {
        padding: 0.5rem;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .heat-cell:hover {
        transform: scale(1.05);
        z-index: 10;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .heat-positive-strong {
        background: #10b981;
        color: white;
      }
      .heat-positive-medium {
        background: #34d399;
        color: white;
      }
      .heat-positive-weak {
        background: #a7f3d0;
        color: #065f46;
      }
      .heat-negative-strong {
        background: #ef4444;
        color: white;
      }
      .heat-negative-medium {
        background: #f87171;
        color: white;
      }
      .heat-negative-weak {
        background: #fecaca;
        color: #991b1b;
      }
      .heat-neutral {
        background: #e5e7eb;
        color: #374151;
      }

      .text-primary {
        color: var(--primary);
      }
      .text-secondary {
        color: var(--text-secondary);
      }
      .text-success {
        color: var(--success);
      }
      .text-warning {
        color: var(--warning);
      }
      .text-danger {
        color: var(--danger);
      }

      .bg-primary {
        background: var(--primary);
      }
      .bg-secondary {
        background: var(--secondary);
      }
      .bg-success {
        background: var(--success);
      }
      .bg-warning {
        background: var(--warning);
      }
      .bg-danger {
        background: var(--danger);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .container {
          padding: 0 0.5rem;
        }

        .stats-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .form-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .tabs {
          flex-direction: column;
          gap: 0.25rem;
        }

        .tab {
          text-align: left;
        }
      }

      /* Accessibility */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* Enhanced Tooltip System */
      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip-content {
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 0.5rem 0.75rem;
        border-radius: 6px;
        font-size: 0.75rem;
        white-space: nowrap;
        max-width: 300px;
        white-space: normal;
        text-align: center;
        z-index: 1000;
        margin-bottom: 0.5rem;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .tooltip-content::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        border: 4px solid transparent;
        border-top-color: rgba(0, 0, 0, 0.9);
      }

      .tooltip:hover .tooltip-content {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(-4px);
      }

      /* Tab tooltips */
      .tab {
        position: relative;
      }

      .tab .tooltip-content {
        bottom: auto;
        top: 100%;
        margin-top: 0.5rem;
        margin-bottom: 0;
      }

      .tab .tooltip-content::after {
        top: auto;
        bottom: 100%;
        border-top-color: transparent;
        border-bottom-color: rgba(0, 0, 0, 0.9);
      }

      .tooltip:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 0.75rem;
        white-space: nowrap;
        z-index: 1000;
        animation: tooltip-appear 0.2s ease-out;
        max-width: 300px;
        white-space: normal;
      }

      .tooltip:hover::before {
        content: "";
        position: absolute;
        bottom: 120%;
        left: 50%;
        transform: translateX(-50%);
        border: 5px solid transparent;
        border-top-color: rgba(0, 0, 0, 0.9);
        z-index: 1000;
      }

      @keyframes tooltip-appear {
        from {
          opacity: 0;
          transform: translateX(-50%) translateY(5px);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) translateY(0);
        }
      }

      /* Search Box Styles */
      .search-box {
        position: relative;
        width: 100%;
        max-width: 400px;
      }

      .search-input {
        width: 100%;
        padding: 12px 16px 12px 48px;
        border: 2px solid var(--border);
        border-radius: var(--radius);
        font-size: 1rem;
        transition: all 0.3s ease;
        background: var(--surface);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .search-icon {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-secondary);
        pointer-events: none;
      }

      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow-lg);
        max-height: 300px;
        overflow-y: auto;
        z-index: 1000;
        margin-top: 4px;
      }

      .search-result {
        padding: 12px 16px;
        cursor: pointer;
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--border);
      }

      .search-result:hover {
        background: var(--surface-secondary);
      }

      .search-result:last-child {
        border-bottom: none;
      }

      /* Mini Chart Styles */
      .mini-chart {
        height: 40px;
        width: 100%;
        margin: 8px 0;
        position: relative;
        background: linear-gradient(to right, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%);
        border-radius: 4px;
        overflow: hidden;
      }

      .mini-chart svg {
        width: 100%;
        height: 100%;
      }

      .mini-chart .chart-line {
        fill: none;
        stroke: var(--primary);
        stroke-width: 2;
        opacity: 0.8;
      }

      .mini-chart .chart-area {
        fill: url(#chartGradient);
        opacity: 0.3;
      }

      /* Stable Market Data Container */
      .market-data-container {
        opacity: 1;
      }

      .market-data-container.loaded {
        opacity: 1;
      }

      /* Enhanced Stock Cards */
      .stock-card.enhanced {
        background: var(--surface);
        border-radius: var(--radius);
        padding: 1.5rem;
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .stock-card.enhanced:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
      }

      .stock-card.enhanced.positive {
        border-left: 4px solid var(--success);
      }

      .stock-card.enhanced.negative {
        border-left: 4px solid var(--danger);
      }

      .stock-card.enhanced.neutral {
        border-left: 4px solid var(--secondary);
      }

      /* Stable price animations */
      .price-change {
        transition: all 0.3s ease;
        position: relative;
      }

      .price-change.flash-green {
        animation: flash-green 0.5s ease-out;
      }

      .price-change.flash-red {
        animation: flash-red 0.5s ease-out;
      }

      @keyframes flash-green {
        0% {
          background-color: transparent;
        }
        50% {
          background-color: rgba(16, 185, 129, 0.2);
        }
        100% {
          background-color: transparent;
        }
      }

      @keyframes flash-red {
        0% {
          background-color: transparent;
        }
        50% {
          background-color: rgba(239, 68, 68, 0.2);
        }
        100% {
          background-color: transparent;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useMemo, useCallback, useRef, createContext, useContext } = React

      // Configuration Management
      const DEFAULT_CONFIG = {
        currentAge: 30,
        retirementAge: 65,
        currentSavings: 50000,
        monthlySavings: 2000,
        annualReturn: 7,
        monthlyExpenses: 4000,
        safeWithdrawalRate: 4,
        inflationRate: 2.5,
        currency: "USD",
        volatility: 15,
        numSimulations: 1000,
      }

      // Currency Setup
      const SUPPORTED_CURRENCIES = [
        { value: "USD", label: "🇺🇸 US Dollar (USD)", symbol: "$" },
        { value: "EUR", label: "🇪🇺 Euro (EUR)", symbol: "€" },
        { value: "GBP", label: "🇬🇧 British Pound (GBP)", symbol: "£" },
        { value: "CAD", label: "🇨🇦 Canadian Dollar (CAD)", symbol: "C$" },
        { value: "AUD", label: "🇦🇺 Australian Dollar (AUD)", symbol: "A$" },
        { value: "SEK", label: "🇸🇪 Swedish Krona (SEK)", symbol: "kr" },
        { value: "NOK", label: "🇳🇴 Norwegian Krone (NOK)", symbol: "kr" },
        { value: "DKK", label: "🇩🇰 Danish Krone (DKK)", symbol: "kr" },
        { value: "CHF", label: "🇨🇭 Swiss Franc (CHF)", symbol: "CHF" },
        { value: "JPY", label: "🇯🇵 Japanese Yen (JPY)", symbol: "¥" },
      ]

      // Currency API and conversion setup
      const setupCurrencyAPI = async () => {
        if (window.fx) {
          fx.base = "USD"
          try {
            // Try to fetch live rates from fxratesapi.com (free API)
            const response = await fetch("https://api.fxratesapi.com/latest?base=USD")
            const data = await response.json()
            fx.rates = data.rates
            fx.rates.USD = 1 // Ensure USD base is set
          } catch (error) {
            console.warn("Failed to fetch live exchange rates, using fallback rates")
            // Fallback static rates
            fx.rates = {
              USD: 1,
              EUR: 0.85,
              GBP: 0.73,
              CAD: 1.35,
              AUD: 1.5,
              SEK: 10.5,
              NOK: 10.8,
              DKK: 6.35,
              CHF: 0.88,
              JPY: 110.0,
            }
          }
        }
      }

      // Session analytics and user statistics
      const getSessionAnalytics = () => {
        try {
          const sessionData = JSON.parse(localStorage.getItem("sessionData") || "{}")
          const totalSessions = parseInt(localStorage.getItem("totalSessions") || "0")
          const calculatorData = JSON.parse(localStorage.getItem("calculatorData") || "{}")

          return {
            totalSessions,
            lastVisit: sessionData.lastVisit || new Date().toISOString(),
            preferredCurrency: sessionData.preferredCurrency || "USD",
            lastActiveTab: sessionData.lastActiveTab || "calculator",
            marketDataUpdates: marketDataCache.metadata.totalUpdates || 0,
            calculatorUsage: {
              lastCalculation: calculatorData.lastCalculation || null,
              totalCalculations: calculatorData.totalCalculations || 0,
            },
          }
        } catch (error) {
          console.warn("Failed to load session analytics:", error)
          return {
            totalSessions: 0,
            lastVisit: new Date().toISOString(),
            preferredCurrency: "USD",
            lastActiveTab: "calculator",
            marketDataUpdates: 0,
            calculatorUsage: { lastCalculation: null, totalCalculations: 0 },
          }
        }
      }

      // Save user preferences and usage patterns
      const saveUserPreferences = (preferences) => {
        try {
          const existing = JSON.parse(localStorage.getItem("userPreferences") || "{}")
          const updated = { ...existing, ...preferences, lastUpdated: new Date().toISOString() }
          localStorage.setItem("userPreferences", JSON.stringify(updated))
          localStorage.setItem("preferredCurrency", preferences.currency || "USD")
        } catch (error) {
          console.warn("Failed to save user preferences:", error)
        }
      }

      // Track calculator usage
      const trackCalculatorUsage = (calculationType, result) => {
        try {
          const existing = JSON.parse(localStorage.getItem("calculatorData") || "{}")
          const updated = {
            ...existing,
            lastCalculation: new Date().toISOString(),
            totalCalculations: (existing.totalCalculations || 0) + 1,
            calculationType,
            lastResult: result,
          }
          localStorage.setItem("calculatorData", JSON.stringify(updated))
        } catch (error) {
          console.warn("Failed to track calculator usage:", error)
        }
      }

      // Toast notification system
      let toastId = 0
      const showToast = (message, type = "info", duration = 3000) => {
        const toastElement = document.createElement("div")
        const id = `toast-${toastId++}`
        toastElement.id = id
        toastElement.className = `toast ${type}`

        const iconMap = {
          success: "check-circle",
          error: "exclamation-circle",
          warning: "exclamation-triangle",
          info: "info-circle",
        }

        toastElement.innerHTML = `
                <div class="flex items-center gap-3">
                    <i class="fas fa-${iconMap[type]} text-${
          type === "error" ? "red" : type === "success" ? "green" : type === "warning" ? "yellow" : "blue"
        }-500"></i>
                    <div class="flex-1">
                        <div class="font-medium text-gray-800">${message}</div>
                    </div>
                    <button onclick="document.getElementById('${id}').remove()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `

        document.body.appendChild(toastElement)

        setTimeout(() => {
          if (document.getElementById(id)) {
            toastElement.classList.add("toast-exit")
            setTimeout(() => {
              toastElement.remove()
            }, 300)
          }
        }, duration)
      }

      // Keyboard shortcuts for power users
      const setupKeyboardShortcuts = () => {
        document.addEventListener("keydown", (e) => {
          // Only activate shortcuts when not in an input field
          if (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA" || e.target.tagName === "SELECT") {
            return
          }

          if (e.ctrlKey || e.metaKey) {
            switch (e.key) {
              case "1":
                e.preventDefault()
                document.querySelector('[data-tab="dashboard"]')?.click()
                showToast("Switched to Dashboard", "info", 1000)
                break
              case "2":
                e.preventDefault()
                document.querySelector('[data-tab="market"]')?.click()
                showToast("Switched to Market Data", "info", 1000)
                break
              case "3":
                e.preventDefault()
                document.querySelector('[data-tab="guide"]')?.click()
                showToast("Switched to Guides", "info", 1000)
                break
              case "4":
                e.preventDefault()
                document.querySelector('[data-tab="settings"]')?.click()
                showToast("Switched to Settings", "info", 1000)
                break
              case "r":
                e.preventDefault()
                if (document.querySelector('[data-tab="market-data"]')?.classList.contains("active")) {
                  document.querySelector('[data-refresh="market"]')?.click()
                  showToast("Refreshing market data...", "info", 1000)
                }
                break
              case "m":
                e.preventDefault()
                document.querySelector('[data-simulation="run"]')?.click()
                break
            }
          }
        })
      }

      // Initialize keyboard shortcuts
      if (typeof window !== "undefined") {
        setupKeyboardShortcuts()
      }

      // Initialize currency API
      if (typeof window !== "undefined") {
        setupCurrencyAPI()
      }

      // API Configuration - Tiingo API only
      const API_CONFIG = {
        // Get free API key from: https://api.tiingo.com/
        TIINGO_KEY: localStorage.getItem("tiingoKey") || "",
      }

      // Debug function for Tiingo API
      const testTiingoConnection = async () => {
        if (!hasTiingoAPIKey()) {
          console.log("❌ No Tiingo API key configured")
          return false
        }

        try {
          console.log("🔍 Testing Tiingo API connection...")
          const testSymbol = "AAPL"
          const result = await fetchFromTiingo(testSymbol)
          console.log("✅ Tiingo API connection successful:", result)
          return true
        } catch (error) {
          console.error("❌ Tiingo API connection failed:", error.message)
          return false
        }
      }

      // Test connection on page load if API key is available
      if (typeof window !== "undefined") {
        window.addEventListener('load', () => {
          if (hasTiingoAPIKey()) {
            testTiingoConnection()
          }
        })
      }

      // Function to save Tiingo API key
      const saveAPIKey = (key) => {
        if (key && key.trim()) {
          localStorage.setItem("tiingoKey", key.trim())
          API_CONFIG.TIINGO_KEY = key.trim()
        }
      }

      // Function to check if Tiingo API key is available
      const hasTiingoAPIKey = () => {
        return API_CONFIG.TIINGO_KEY && API_CONFIG.TIINGO_KEY.trim() !== ""
      }

      // Market Data Setup
      const MARKET_TICKERS = [
        { symbol: "SPY", name: "S&P 500 ETF" },
        { symbol: "VTI", name: "Total Stock Market ETF" },
        { symbol: "QQQ", name: "NASDAQ 100 ETF" },
        { symbol: "VEA", name: "Developed Markets ETF" },
        { symbol: "VWO", name: "Emerging Markets ETF" },
        { symbol: "BND", name: "Total Bond Market ETF" },
        { symbol: "VNQ", name: "Real Estate ETF" },
        { symbol: "GLD", name: "Gold ETF" },
        { symbol: "AAPL", name: "Apple Inc." },
        { symbol: "MSFT", name: "Microsoft Corp." },
        { symbol: "GOOGL", name: "Alphabet Inc." },
        { symbol: "AMZN", name: "Amazon.com Inc." },
        { symbol: "TSLA", name: "Tesla Inc." },
        { symbol: "NVDA", name: "NVIDIA Corp." },
      ]

      const MARKET_INDICES = [
        { symbol: "^GSPC", name: "S&P 500", displayName: "S&P 500" },
        { symbol: "^DJI", name: "Dow Jones", displayName: "Dow Jones" },
        { symbol: "^IXIC", name: "NASDAQ", displayName: "NASDAQ" },
        { symbol: "^RUT", name: "Russell 2000", displayName: "Russell 2000" },
        { symbol: "^VIX", name: "VIX", displayName: "VIX" },
      ]

      // Enhanced market data cache with historical data and analytics
      let marketDataCache = {
        data: {},
        lastUpdated: null,
        isLoading: false,
        historical: {}, // Store historical data for trends
        metadata: {
          totalUpdates: 0,
          sessionStart: new Date().toISOString(),
          lastSessionData: null,
          updateFrequency: 1000, // milliseconds
          maxHistoricalPoints: 100, // Keep last 100 data points per symbol
        },
      }

      // Enhanced load function with historical data restoration
      const loadCachedMarketData = () => {
        try {
          const cached = localStorage.getItem("marketDataCache")
          if (cached) {
            const parsedCache = JSON.parse(cached)
            const cacheAge = new Date() - new Date(parsedCache.lastUpdated)

            // Always load historical data and metadata, even if main data is stale
            if (parsedCache.historical) {
              marketDataCache.historical = parsedCache.historical
            }
            if (parsedCache.metadata) {
              marketDataCache.metadata = { ...marketDataCache.metadata, ...parsedCache.metadata }
            }

            // Use cache if less than 1 hour old
            if (cacheAge < 60 * 60 * 1000) {
              marketDataCache = parsedCache
              return parsedCache.data
            }
          }
        } catch (error) {
          console.warn("Failed to load cached market data:", error)
        }
        return {}
      }

      // Enhanced save function with historical data and analytics
      const saveCachedMarketData = (data) => {
        try {
          const now = new Date()
          const timestamp = now.toISOString()

          // Update historical data
          Object.keys(data).forEach((symbol) => {
            if (!marketDataCache.historical[symbol]) {
              marketDataCache.historical[symbol] = []
            }

            const history = marketDataCache.historical[symbol]
            history.push({
              timestamp: timestamp,
              price: data[symbol].price,
              change: data[symbol].change,
              changePercent: data[symbol].changePercent,
              volume: data[symbol].volume,
            })

            // Keep only last maxHistoricalPoints
            if (history.length > marketDataCache.metadata.maxHistoricalPoints) {
              history.shift()
            }
          })

          // Update metadata
          marketDataCache.metadata.totalUpdates++
          marketDataCache.metadata.lastSessionData = timestamp

          const cacheToSave = {
            data,
            lastUpdated: timestamp,
            isLoading: false,
            historical: marketDataCache.historical,
            metadata: marketDataCache.metadata,
          }

          localStorage.setItem("marketDataCache", JSON.stringify(cacheToSave))
          localStorage.setItem("marketDataCacheTimestamp", timestamp)

          // Also save user session data
          const sessionData = {
            lastVisit: timestamp,
            totalSessions: parseInt(localStorage.getItem("totalSessions") || "0") + 1,
            preferredCurrency: localStorage.getItem("preferredCurrency") || "USD",
            lastActiveTab: localStorage.getItem("lastActiveTab") || "calculator",
          }

          localStorage.setItem("sessionData", JSON.stringify(sessionData))
          localStorage.setItem("totalSessions", sessionData.totalSessions.toString())

          marketDataCache = cacheToSave
        } catch (error) {
          console.warn("Failed to save market data to cache:", error)
        }
      }

      // Enhanced market data with multiple API sources and comprehensive fallback
      const fetchMarketData = async (symbols = [], forceRefresh = false) => {
        // Check if Tiingo API key is available
        if (!hasTiingoAPIKey()) {
          console.warn("Tiingo API key not configured")
          return {}
        }

        if (marketDataCache.isLoading && !forceRefresh) return marketDataCache.data

        const now = new Date()
        const cacheAge = marketDataCache.lastUpdated ? now - new Date(marketDataCache.lastUpdated) : Infinity

        // Use cache if less than 5 minutes old and not forcing refresh
        if (!forceRefresh && cacheAge < 5 * 60 * 1000 && Object.keys(marketDataCache.data).length > 0) {
          return marketDataCache.data
        }

        marketDataCache.isLoading = true

        try {
          // Define comprehensive symbol lists following tiingo.py patterns
          const symbolCategories = {
            popular_stocks: ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX', 'CRM', 'ADBE'],
            etfs: ['SPY', 'VTI', 'QQQ', 'VEA', 'VWO', 'BND', 'VNQ', 'GLD', 'IVV', 'VOO', 'TLT', 'XLF', 'XLK'],
            indices: ['^GSPC', '^DJI', '^IXIC', '^RUT', '^VIX'],
            international: ['VEA', 'VWO', 'IEFA', 'IEMG', 'EFA', 'EWJ', 'EWZ'],
            bonds: ['BND', 'TLT', 'GOVT', 'VGIT', 'VCIT', 'HYG', 'EMB'],
            commodities: ['GLD', 'SLV', 'PDBC', 'DBA', 'USO']
          }

          // Use provided symbols or default comprehensive list
          const allSymbols = symbols.length > 0 ? symbols : [
            ...symbolCategories.popular_stocks.slice(0, 6), // Top 6 stocks
            ...symbolCategories.etfs.slice(0, 8), // Top 8 ETFs
            ...symbolCategories.indices // All major indices
          ]

          const marketData = {}
          const batchSize = 5 // Process in smaller batches to avoid rate limits

          // Process symbols in batches to follow tiingo.py best practices
          for (let i = 0; i < allSymbols.length; i += batchSize) {
            const batch = allSymbols.slice(i, i + batchSize)

            const batchPromises = batch.map(async (symbol) => {
              try {
                // Use standard options following tiingo.py patterns
                const options = {
                  startDate: null, // Get all available data
                  endDate: null,
                  columns: 'open,high,low,close,volume,adjOpen,adjHigh,adjLow,adjClose,adjVolume,divCash,splitFactor',
                  frequency: 'daily',
                  format: 'json'
                }

                const data = await fetchFromTiingo(symbol, options)
                return { symbol, data }
              } catch (error) {
                console.warn(`Failed to fetch Tiingo data for ${symbol}:`, error.message)
                return { symbol, data: null, error: error.message }
              }
            })

            // Wait for batch to complete
            const batchResults = await Promise.all(batchPromises)

            // Process batch results
            batchResults.forEach(({ symbol, data, error }) => {
              if (data) {
                marketData[symbol] = data
              } else {
                console.warn(`No data for ${symbol}:`, error)
              }
            })

            // Small delay between batches to respect rate limits
            if (i + batchSize < allSymbols.length) {
              await new Promise(resolve => setTimeout(resolve, 200))
            }
          }

          const successfulResults = Object.values(marketData).filter(data => data !== null)

          saveCachedMarketData(marketData)
          marketDataCache.isLoading = false

          // Show success notification if this is a manual refresh
          if (forceRefresh && typeof showToast !== "undefined") {
            const totalSymbols = allSymbols.length
            const successfulSymbols = successfulResults.length
            if (successfulSymbols > 0) {
              showToast(`Market data updated for ${successfulSymbols}/${totalSymbols} securities`, "success", 2000)
            } else {
              showToast("No market data could be fetched - check your Tiingo API key", "error", 3000)
            }
          }

          return marketData
        } catch (error) {
          console.error("Market data fetch failed:", error)
          marketDataCache.isLoading = false

          // Show error notification if available
          if (typeof showToast !== "undefined") {
            if (error.message.includes("Tiingo API key")) {
              showToast("Please configure your Tiingo API key in Settings", "error", 4000)
            } else if (error.message.includes("401") || error.message.includes("403")) {
              showToast("Invalid Tiingo API key - check your settings", "error", 4000)
            } else if (error.message.includes("429")) {
              showToast("Tiingo API rate limit exceeded - try again later", "error", 4000)
            } else {
              showToast("Failed to fetch market data - check your internet connection", "error", 3000)
            }
          }

          return {}
        }
      }

      // Tiingo API implementation following the official Python client patterns
      const fetchFromTiingo = async (symbol, options = {}) => {
        symbol = symbol.replace("^", "") // Remove ^ for Tiingo compatibility
        const API_KEY = API_CONFIG.TIINGO_KEY
        if (!API_KEY) {
          throw new Error("Tiingo API key not configured")
        }

        // Default options following tiingo.py patterns
        const {
          startDate = null,
          endDate = null,
          columns = null,
          frequency = 'daily',
          format = 'json'
        } = options

        // Headers following the Tiingo API documentation
        const headers = {
          'Content-Type': 'application/json'
        }

        try {
          // Step 1: Get ticker metadata using /tiingo/daily/{ticker}
          // Don't use URL constructor as it encodes ^ to %5E which breaks Tiingo API
          const metaUrl = `https://api.tiingo.com/tiingo/daily/${symbol}?token=${API_KEY}`

          const metaResponse = await fetch(metaUrl, { headers })

          if (!metaResponse.ok) {
            if (metaResponse.status === 404) {
              throw new Error(`Symbol ${symbol} not found`)
            } else if (metaResponse.status === 401 || metaResponse.status === 403) {
              throw new Error(`Invalid Tiingo API key or access denied`)
            } else if (metaResponse.status === 429) {
              throw new Error(`Tiingo API rate limit exceeded`)
            } else {
              throw new Error(`Tiingo API error: ${metaResponse.status}`)
            }
          }

          const metaData = await metaResponse.json()

          // Step 2: Get price data using /tiingo/daily/{ticker}/prices
          // Build URL manually to avoid encoding issues with ^ character
          let priceUrl = `https://api.tiingo.com/tiingo/daily/${symbol}/prices?token=${API_KEY}`

          // Add query parameters following tiingo.py patterns
          if (startDate) priceUrl += `&startDate=${startDate}`
          if (endDate) priceUrl += `&endDate=${endDate}`
          if (columns) priceUrl += `&columns=${columns}`
          if (format !== 'json') priceUrl += `&format=${format}`
          if (frequency !== 'daily') priceUrl += `&resampleFreq=${frequency}`

          const priceResponse = await fetch(priceUrl, { headers })

          if (!priceResponse.ok) {
            throw new Error(`Tiingo price API error: ${priceResponse.status}`)
          }

          const priceData = await priceResponse.json()

          if (!priceData || priceData.length === 0) {
            throw new Error(`No price data available for ${symbol}`)
          }

          // Get latest price data (last element in array)
          const latestPrice = priceData[priceData.length - 1]

          // Calculate change from previous trading day
          let change = 0
          let changePercent = 0
          let previousClose = latestPrice.close

          if (priceData.length > 1) {
            const previousPrice = priceData[priceData.length - 2]
            previousClose = previousPrice.close
            change = latestPrice.close - previousClose
            changePercent = previousClose !== 0 ? (change / previousClose) * 100 : 0
          }

          // Generate price history for charts (last 30 trading days)
          const priceHistory = priceData.slice(-30).map(day => day.close)

          // Determine asset type from metadata
          let assetType = 'stock'
          const exchangeCode = metaData.exchangeCode || ''
          if (exchangeCode.includes('ETF') || symbol.includes('ETF') ||
              ['SPY', 'QQQ', 'VTI', 'VEA', 'VWO', 'BND', 'VNQ', 'GLD', 'IVV', 'VOO'].includes(symbol)) {
            assetType = 'etf'
          } else if (symbol.startsWith('^')) {
            assetType = 'index'
          } else if (symbol.includes('X') && symbol.length > 4) {
            assetType = 'mutual_fund'
          }

          // Return data in consistent format following tiingo.py response structure
          return {
            // Basic identification
            symbol: symbol,
            name: metaData.name || symbol,
            description: metaData.description || '',
            exchangeCode: metaData.exchangeCode || 'Unknown',
            assetType: assetType,

            // Price data from latest trading day
            price: parseFloat(latestPrice.close.toFixed(2)),
            change: parseFloat(change.toFixed(2)),
            changePercent: parseFloat(changePercent.toFixed(2)),

            // OHLCV data
            open: parseFloat(latestPrice.open.toFixed(2)),
            high: parseFloat(latestPrice.high.toFixed(2)),
            low: parseFloat(latestPrice.low.toFixed(2)),
            close: parseFloat(latestPrice.close.toFixed(2)),
            volume: latestPrice.volume || 0,

            // Adjusted data
            adjOpen: parseFloat((latestPrice.adjOpen || latestPrice.open).toFixed(2)),
            adjHigh: parseFloat((latestPrice.adjHigh || latestPrice.high).toFixed(2)),
            adjLow: parseFloat((latestPrice.adjLow || latestPrice.low).toFixed(2)),
            adjClose: parseFloat((latestPrice.adjClose || latestPrice.close).toFixed(2)),
            adjVolume: latestPrice.adjVolume || latestPrice.volume || 0,

            // Previous close for reference
            previousClose: parseFloat(previousClose.toFixed(2)),

            // Corporate actions
            divCash: latestPrice.divCash || 0,
            splitFactor: latestPrice.splitFactor || 1,

            // Date information
            date: latestPrice.date,
            lastUpdated: latestPrice.date,
            startDate: metaData.startDate,
            endDate: metaData.endDate,

            // Chart data
            priceHistory: priceHistory,

            // Metadata
            dataSource: 'Tiingo',
            fetchTime: new Date().toISOString()
          }

        } catch (error) {
          console.error(`Error fetching Tiingo data for ${symbol}:`, error)
          throw error
        }
      }

      // Get current market state
      const getMarketState = () => {
        const now = new Date()
        const hour = now.getHours()
        const day = now.getDay()

        // Weekend
        if (day === 0 || day === 6) return "CLOSED"

        // Market hours (9:30 AM - 4:00 PM ET)
        if (hour >= 9 && hour < 16) return "REGULAR"
        if (hour >= 4 && hour < 20) return "POST"
        if (hour >= 4 && hour < 9) return "PRE"

        return "CLOSED"
      }

      // Enhanced helper functions with realistic data
      const getBasePrice = (symbol) => {
        const prices = {
          AAPL: 175.25,
          MSFT: 348.1,
          GOOGL: 138.75,
          AMZN: 151.2,
          TSLA: 201.5,
          NVDA: 445.8,
          SPY: 451.2,
          QQQ: 378.95,
          VTI: 241.3,
          VEA: 49.85,
          VWO: 39.4,
          BND: 78.25,
          VNQ: 89.7,
          GLD: 189.45,
          "^GSPC": 4521.35,
          "^DJI": 35280.15,
          "^IXIC": 14045.75,
          "^RUT": 1823.4,
          "^VIX": 17.85,
        }
        return prices[symbol] || Math.random() * 200 + 20
      }

      const getSymbolVolatility = (symbol) => {
        const volatilities = {
          TSLA: 0.028,
          NVDA: 0.025,
          "^VIX": 0.15,
          SPY: 0.012,
          VTI: 0.012,
          BND: 0.005,
          GLD: 0.015,
          AAPL: 0.018,
          MSFT: 0.016,
          GOOGL: 0.02,
          AMZN: 0.022,
          QQQ: 0.015,
          VEA: 0.014,
          VWO: 0.018,
          VNQ: 0.02,
        }
        return volatilities[symbol] || 0.016
      }

      const getMarketCap = (symbol, price) => {
        const shares = {
          AAPL: 15700000000,
          MSFT: 7430000000,
          GOOGL: 13200000000,
          AMZN: 10700000000,
          TSLA: 3170000000,
          NVDA: 2470000000,
        }
        return shares[symbol]
          ? Math.floor(shares[symbol] * price)
          : Math.floor(Math.random() * 500000000000) + 1000000000
      }

      const getRealisticVolume = (symbol) => {
        const avgVolumes = {
          AAPL: 52000000,
          MSFT: 28000000,
          GOOGL: 25000000,
          AMZN: 35000000,
          TSLA: 78000000,
          NVDA: 45000000,
          SPY: 85000000,
          QQQ: 42000000,
          VTI: 18000000,
          VEA: 8000000,
          VWO: 15000000,
          BND: 12000000,
          VNQ: 6000000,
          GLD: 14000000,
        }
        const baseVolume = avgVolumes[symbol] || 5000000
        return Math.floor(baseVolume * (0.5 + Math.random() * 1.5))
      }

      const getRealisticPE = (symbol) => {
        const peRanges = {
          AAPL: [25, 35],
          MSFT: [28, 38],
          GOOGL: [20, 30],
          AMZN: [40, 60],
          TSLA: [30, 80],
          NVDA: [35, 65],
          SPY: [18, 25],
          QQQ: [25, 35],
        }
        const range = peRanges[symbol] || [12, 30]
        return (Math.random() * (range[1] - range[0]) + range[0]).toFixed(2)
      }

      const getRealisticDividend = (symbol) => {
        const dividends = {
          AAPL: 0.5,
          MSFT: 0.68,
          GOOGL: 0.0,
          AMZN: 0.0,
          TSLA: 0.0,
          NVDA: 0.16,
          SPY: 1.32,
          QQQ: 0.57,
          VTI: 1.29,
          VEA: 2.85,
          VWO: 3.12,
          BND: 2.08,
          VNQ: 2.92,
          GLD: 0.0,
        }
        return (dividends[symbol] || Math.random() * 3).toFixed(2)
      }

      const getRealisticBeta = (symbol) => {
        const betas = {
          AAPL: 1.28,
          MSFT: 0.9,
          GOOGL: 1.05,
          AMZN: 1.15,
          TSLA: 2.08,
          NVDA: 1.65,
          SPY: 1.0,
          QQQ: 1.12,
          VTI: 1.0,
          VEA: 0.85,
          VWO: 1.18,
          BND: 0.05,
          VNQ: 1.15,
          GLD: 0.12,
        }
        return (betas[symbol] || Math.random() * 1.5 + 0.5).toFixed(2)
      }

      const getSector = (symbol) => {
        const sectors = {
          AAPL: "Technology",
          MSFT: "Technology",
          GOOGL: "Technology",
          AMZN: "Consumer Cyclical",
          TSLA: "Consumer Cyclical",
          NVDA: "Technology",
          SPY: "Diversified",
          QQQ: "Technology",
          VTI: "Diversified",
          VEA: "International",
          VWO: "Emerging Markets",
          BND: "Fixed Income",
          VNQ: "Real Estate",
          GLD: "Commodities",
        }
        return sectors[symbol] || "Unknown"
      }

      const getIndustry = (symbol) => {
        const industries = {
          AAPL: "Consumer Electronics",
          MSFT: "Software",
          GOOGL: "Internet Services",
          AMZN: "E-commerce",
          TSLA: "Electric Vehicles",
          NVDA: "Semiconductors",
          SPY: "Index Fund",
          QQQ: "Index Fund",
          VTI: "Index Fund",
          VEA: "International Fund",
          VWO: "Emerging Markets Fund",
          BND: "Bond Fund",
          VNQ: "REIT Fund",
          GLD: "Commodities Fund",
        }
        return industries[symbol] || "Unknown"
      }

      const getShortName = (symbol) => {
        const names = {
          AAPL: "Apple Inc.",
          MSFT: "Microsoft Corp.",
          GOOGL: "Alphabet Inc.",
          AMZN: "Amazon.com Inc.",
          TSLA: "Tesla Inc.",
          NVDA: "NVIDIA Corp.",
          SPY: "SPDR S&P 500",
          QQQ: "Invesco QQQ",
          VTI: "Vanguard Total Stock",
          VEA: "Vanguard FTSE Developed",
          VWO: "Vanguard FTSE Emerging",
          BND: "Vanguard Total Bond",
          VNQ: "Vanguard Real Estate",
          GLD: "SPDR Gold Trust",
          "^GSPC": "S&P 500",
          "^DJI": "Dow Jones",
          "^IXIC": "NASDAQ",
          "^RUT": "Russell 2000",
          "^VIX": "VIX",
        }
        return names[symbol] || symbol
      }

      const getLongName = (symbol) => {
        const names = {
          AAPL: "Apple Inc.",
          MSFT: "Microsoft Corporation",
          GOOGL: "Alphabet Inc. Class A",
          AMZN: "Amazon.com, Inc.",
          TSLA: "Tesla, Inc.",
          NVDA: "NVIDIA Corporation",
          SPY: "SPDR S&P 500 ETF Trust",
          QQQ: "Invesco QQQ Trust",
          VTI: "Vanguard Total Stock Market ETF",
          VEA: "Vanguard FTSE Developed Markets ETF",
          VWO: "Vanguard FTSE Emerging Markets ETF",
          BND: "Vanguard Total Bond Market ETF",
          VNQ: "Vanguard Real Estate ETF",
          GLD: "SPDR Gold Trust",
          "^GSPC": "S&P 500 Index",
          "^DJI": "Dow Jones Industrial Average",
          "^IXIC": "NASDAQ Composite",
          "^RUT": "Russell 2000 Index",
          "^VIX": "CBOE Volatility Index",
        }
        return names[symbol] || symbol
      }

      const getExchangeName = (symbol) => {
        const exchanges = {
          AAPL: "NASDAQ",
          MSFT: "NASDAQ",
          GOOGL: "NASDAQ",
          AMZN: "NASDAQ",
          TSLA: "NASDAQ",
          NVDA: "NASDAQ",
          SPY: "NYSE Arca",
          QQQ: "NASDAQ",
          VTI: "NYSE Arca",
          VEA: "NYSE Arca",
          VWO: "NYSE Arca",
          BND: "NYSE Arca",
          VNQ: "NYSE Arca",
          GLD: "NYSE Arca",
        }
        return exchanges[symbol] || "Unknown"
      }

      const generateRealisticPriceHistory = (currentPrice, points) => {
        const history = []
        let price = currentPrice * 0.95 // Start slightly lower

        for (let i = 0; i < points; i++) {
          const change = (Math.random() - 0.5) * 0.02 * price
          price = Math.max(price + change, 0.01)
          history.push(price)
        }

        return history
      }

      const getRandomEarningsDate = () => {
        const dates = [
          "2025-01-15",
          "2025-01-22",
          "2025-01-29",
          "2025-02-05",
          "2025-02-12",
          "2025-02-19",
          "2025-02-26",
          "2025-03-05",
          "2025-03-12",
          "2025-03-19",
        ]
        return dates[Math.floor(Math.random() * dates.length)]
      }

      const getAnalystRating = () => {
        const ratings = ["Strong Buy", "Buy", "Hold", "Sell", "Strong Sell"]
        const weights = [0.25, 0.35, 0.3, 0.08, 0.02] // Realistic distribution
        const random = Math.random()
        let sum = 0

        for (let i = 0; i < ratings.length; i++) {
          sum += weights[i]
          if (random < sum) {
            return ratings[i]
          }
        }

        return "Hold"
      }

      // Fallback data function for when API fails (uses enhanced fallback)
      const getFallbackData = (symbol) => {
        return getEnhancedFallbackData(symbol)
      }

      // Fallback market data for when all API calls fail
      const getFallbackMarketData = (symbols) => {
        const allSymbols =
          symbols.length > 0
            ? symbols
            : [...MARKET_TICKERS.map((t) => t.symbol), ...MARKET_INDICES.map((i) => i.symbol)]
        const fallbackData = {}

        allSymbols.forEach((symbol) => {
          fallbackData[symbol] = getEnhancedFallbackData(symbol)
        })

        return fallbackData
      }

      // Generate realistic price history for mini charts
      const generatePriceHistory = (currentPrice, points = 20) => {
        const history = []
        let price = currentPrice * (0.95 + Math.random() * 0.1) // Start within 5% of current

        for (let i = 0; i < points; i++) {
          const change = (Math.random() - 0.5) * 0.04 * price // 4% max change
          price = Math.max(0.01, price + change)
          history.push(price)
        }

        return history
      }

      // Stock search functionality
      const searchStocks = async (query) => {
        if (!query || query.length < 1) return []

        // Enhanced stock database with more stocks
        const stockDatabase = [
          ...MARKET_TICKERS,
          ...MARKET_INDICES,
          { symbol: "AAPL", name: "Apple Inc." },
          { symbol: "MSFT", name: "Microsoft Corporation" },
          { symbol: "GOOGL", name: "Alphabet Inc." },
          { symbol: "AMZN", name: "Amazon.com Inc." },
          { symbol: "META", name: "Meta Platforms Inc." },
          { symbol: "NFLX", name: "Netflix Inc." },
          { symbol: "INTC", name: "Intel Corporation" },
          { symbol: "AMD", name: "Advanced Micro Devices" },
          { symbol: "NVDA", name: "NVIDIA Corporation" },
          { symbol: "CRM", name: "Salesforce Inc." },
          { symbol: "ORCL", name: "Oracle Corporation" },
          { symbol: "ADBE", name: "Adobe Inc." },
          { symbol: "PYPL", name: "PayPal Holdings Inc." },
          { symbol: "UBER", name: "Uber Technologies Inc." },
          { symbol: "LYFT", name: "Lyft Inc." },
          { symbol: "SNAP", name: "Snap Inc." },
          { symbol: "TWTR", name: "Twitter Inc." },
          { symbol: "ZOOM", name: "Zoom Video Communications" },
          { symbol: "SHOP", name: "Shopify Inc." },
          { symbol: "SQ", name: "Block Inc." },
          { symbol: "ROKU", name: "Roku Inc." },
          { symbol: "PINS", name: "Pinterest Inc." },
          { symbol: "SPOT", name: "Spotify Technology" },
          { symbol: "PLTR", name: "Palantir Technologies" },
          { symbol: "COIN", name: "Coinbase Global Inc." },
          { symbol: "RBLX", name: "Roblox Corporation" },
          { symbol: "HOOD", name: "Robinhood Markets Inc." },
          { symbol: "DDOG", name: "Datadog Inc." },
          { symbol: "SNOW", name: "Snowflake Inc." },
          { symbol: "CRWD", name: "CrowdStrike Holdings" },
          { symbol: "ZM", name: "Zoom Video Communications" },
          { symbol: "DOCU", name: "DocuSign Inc." },
          { symbol: "OKTA", name: "Okta Inc." },
          { symbol: "WORK", name: "Slack Technologies" },
          { symbol: "TEAM", name: "Atlassian Corporation" },
          { symbol: "SPLK", name: "Splunk Inc." },
          { symbol: "WDAY", name: "Workday Inc." },
          { symbol: "VEEV", name: "Veeva Systems Inc." },
          { symbol: "PANW", name: "Palo Alto Networks" },
          { symbol: "FTNT", name: "Fortinet Inc." },
          { symbol: "CYBR", name: "CyberArk Software" },
          { symbol: "TENB", name: "Tenable Holdings" },
          { symbol: "ESTC", name: "Elastic N.V." },
          { symbol: "MDB", name: "MongoDB Inc." },
          { symbol: "FSLY", name: "Fastly Inc." },
          { symbol: "NET", name: "Cloudflare Inc." },
          { symbol: "GTLB", name: "GitLab Inc." },
          { symbol: "DOCN", name: "DigitalOcean Holdings" },
          { symbol: "LINODE", name: "Linode LLC" },
          { symbol: "VULTR", name: "Vultr Holdings" },
        ]

        const results = stockDatabase
          .filter(
            (stock) =>
              stock.symbol.toLowerCase().includes(query.toLowerCase()) ||
              stock.name.toLowerCase().includes(query.toLowerCase()),
          )
          .slice(0, 10)

        return results
      }

      // Initialize with cached data
      if (typeof window !== "undefined") {
        loadCachedMarketData()
      }

      const ConfigContext = createContext()

      function ConfigProvider({ children }) {
        const [config, setConfig] = useState(() => {
          try {
            const saved = localStorage.getItem("numbersConfig")
            return saved ? { ...DEFAULT_CONFIG, ...JSON.parse(saved) } : DEFAULT_CONFIG
          } catch {
            return DEFAULT_CONFIG
          }
        })

        const updateConfig = useCallback((updates) => {
          setConfig((prev) => {
            const newConfig = { ...prev, ...updates }

            // Handle currency conversion on monetary values when currency changes
            if (updates.currency && updates.currency !== prev.currency && window.fx && window.fx.rates) {
              const monetaryFields = ["currentSavings", "monthlySavings", "monthlyExpenses"]
              monetaryFields.forEach((field) => {
                if (newConfig[field] && newConfig[field] > 0) {
                  try {
                    const convertedValue = fx.convert(newConfig[field], { from: prev.currency, to: updates.currency })
                    newConfig[field] = Math.round(convertedValue)
                  } catch (error) {
                    console.warn(`Failed to convert ${field}:`, error)
                  }
                }
              })
            }

            try {
              localStorage.setItem("numbersConfig", JSON.stringify(newConfig))

              // Track usage
              trackCalculatorUsage("config_update", newConfig)

              // Save user preferences
              if (updates.currency) {
                saveUserPreferences({ currency: updates.currency })
              }
            } catch (e) {
              console.error("Failed to save config:", e)
            }
            return newConfig
          })
        }, [])

        const resetConfig = useCallback(() => {
          setConfig(DEFAULT_CONFIG)
          localStorage.removeItem("numbersConfig")
        }, [])

        return React.createElement(
          ConfigContext.Provider,
          {
            value: { config, updateConfig, resetConfig },
          },
          children,
        )
      }

      function useConfig() {
        const context = useContext(ConfigContext)
        if (!context) {
          throw new Error("useConfig must be used within ConfigProvider")
        }
        return context
      }

      // Utility Functions
      const formatCurrency = (amount, currency = "USD", short = false) => {
        if (short && Math.abs(amount) >= 1000) {
          if (Math.abs(amount) >= 1000000000) {
            return new Intl.NumberFormat("en-US", {
              style: "currency",
              currency: currency,
              minimumFractionDigits: 1,
              maximumFractionDigits: 1,
            }).format(amount / 1000000000) + "B"
          } else if (Math.abs(amount) >= 1000000) {
            return new Intl.NumberFormat("en-US", {
              style: "currency",
              currency: currency,
              minimumFractionDigits: 1,
              maximumFractionDigits: 1,
            }).format(amount / 1000000) + "M"
          } else if (Math.abs(amount) >= 1000) {
            return new Intl.NumberFormat("en-US", {
              style: "currency",
              currency: currency,
              minimumFractionDigits: 1,
              maximumFractionDigits: 1,
            }).format(amount / 1000) + "K"
          }
        }

        return new Intl.NumberFormat("en-US", {
          style: "currency",
          currency: currency,
          minimumFractionDigits: 0,
          maximumFractionDigits: amount < 100 ? 2 : 0,
        }).format(amount)
      }

      const formatPercentage = (num) => `${num.toFixed(1)}%`

      const validateInput = (value, min = 0, max = Infinity) => {
        const num = parseFloat(value) || 0
        return Math.max(min, Math.min(max, num))
      }

      // Financial Calculations
      const calculateCompoundInterest = ({ principal, monthlySavings, annualRate, years, inflationRate = 0 }) => {
        const realAnnualRate = (annualRate - inflationRate) / 100
        const monthlyRate = realAnnualRate / 12
        const totalMonths = years * 12
        const yearlyData = []

        let balance = principal
        for (let month = 1; month <= totalMonths; month++) {
          balance += monthlySavings
          balance *= 1 + monthlyRate

          if (month % 12 === 0) {
            const year = month / 12
            const totalContributions = principal + monthlySavings * month
            const interest = balance - totalContributions
            yearlyData.push({
              year,
              totalValue: Math.round(balance),
              principal: Math.round(totalContributions),
              interest: Math.round(interest),
            })
          }
        }

        const finalTotalContributions = principal + monthlySavings * totalMonths
        const finalTotalInterest = balance - finalTotalContributions

        return {
          totalValue: Math.round(balance),
          totalContributions: Math.round(finalTotalContributions),
          totalInterest: Math.round(finalTotalInterest),
          yearlyData,
        }
      }

      const calculateFIRE = ({
        monthlyExpenses,
        currentSavings,
        monthlySavings,
        annualReturn,
        safeWithdrawalRate,
        inflationRate = 0,
      }) => {
        const annualExpenses = monthlyExpenses * 12
        const fireNumber = annualExpenses / (safeWithdrawalRate / 100)
        const stillNeeded = Math.max(0, fireNumber - currentSavings)
        const progressPercentage = fireNumber > 0 ? Math.min(100, (currentSavings / fireNumber) * 100) : 0

        if (monthlySavings <= 0) {
          return {
            fireNumber: Math.round(fireNumber),
            yearsToFIRE: Infinity,
            stillNeeded: Math.round(stillNeeded),
            progressPercentage: Math.round(progressPercentage),
          }
        }

        const realAnnualReturn = (annualReturn - inflationRate) / 100
        const monthlyRate = realAnnualReturn / 12

        let yearsToFIRE = 0
        if (stillNeeded > 0 && monthlyRate > 0) {
          try {
            const monthsToFIRE =
              Math.log((fireNumber * monthlyRate + monthlySavings) / (currentSavings * monthlyRate + monthlySavings)) /
              Math.log(1 + monthlyRate)
            yearsToFIRE = monthsToFIRE / 12
          } catch {
            yearsToFIRE = Infinity
          }
        }

        return {
          fireNumber: Math.round(fireNumber),
          yearsToFIRE: Math.max(0, yearsToFIRE),
          stillNeeded: Math.round(stillNeeded),
          progressPercentage: Math.round(progressPercentage),
        }
      }

      // Loading Components
      function LoadingCard() {
        return React.createElement(
          "div",
          { className: "loading-card" },
          React.createElement("div", { className: "loading-line skeleton" }),
          React.createElement("div", { className: "loading-line short skeleton" }),
          React.createElement("div", { className: "loading-line medium skeleton" }),
          React.createElement("div", { className: "h-24 bg-gray-100 rounded skeleton mt-4" }),
        )
      }

      function LoadingGrid({ count = 4 }) {
        return React.createElement(
          "div",
          { className: "loading-grid" },
          ...Array.from({ length: count }, (_, i) =>
            React.createElement(LoadingCard, { key: i })
          )
        )
      }

      // Components
      function MarketTicker() {
        const [marketData, setMarketData] = useState({})
        const [isLoading, setIsLoading] = useState(true)

        useEffect(() => {
          const loadMarketData = async () => {
            setIsLoading(true)
            try {
              const data = await fetchMarketData(MARKET_INDICES.map((i) => i.symbol).slice(0, 5))
              setMarketData(data)
            } catch (error) {
              console.error("Failed to load market data:", error)
            }
            setIsLoading(false)
          }

          loadMarketData()
          const interval = setInterval(loadMarketData, 5 * 60 * 1000) // Update every 5 minutes

          return () => clearInterval(interval)
        }, [])

        if (isLoading || Object.keys(marketData).length === 0) {
          return React.createElement(
            "div",
            { className: "ticker-container" },
            React.createElement(
              "div",
              { className: "ticker-content" },
              React.createElement("span", { className: "ticker-item" }, "📈 Loading market data..."),
            ),
          )
        }

        const tickerItems = MARKET_INDICES.map((index) => {
          const data = marketData[index.symbol]
          if (!data) return null

          const isPositive = parseFloat(data.change) >= 0
          const arrow = isPositive ? "▲" : "▼"
          const colorClass = isPositive ? "text-green-300" : "text-red-300"

          return React.createElement(
            "span",
            { key: index.symbol, className: "ticker-item" },
            `${index.displayName}: $${data.price} `,
            React.createElement("span", { className: colorClass }, `${arrow} ${data.change} (${data.changePercent}%)`),
          )
        }).filter(Boolean)

        return React.createElement(
          "div",
          { className: "ticker-container" },
          React.createElement(
            "div",
            { className: "ticker-content" },
            ...tickerItems,
            React.createElement(
              "span",
              { className: "ticker-item text-yellow-300" },
              `🕐 Last updated: ${new Date().toLocaleTimeString()}`,
            ),
          ),
        )
      }

      function Header() {
        const { config, updateConfig } = useConfig()
        const [exchangeRate, setExchangeRate] = useState(null)
        const [lastUpdated, setLastUpdated] = useState(null)
        const [showCurrencyDropdown, setShowCurrencyDropdown] = useState(false)

        useEffect(() => {
          const handleClickOutside = (event) => {
            if (showCurrencyDropdown && !event.target.closest(".currency-dropdown")) {
              setShowCurrencyDropdown(false)
            }
          }

          document.addEventListener("mousedown", handleClickOutside)
          return () => document.removeEventListener("mousedown", handleClickOutside)
        }, [showCurrencyDropdown])

        useEffect(() => {
          if (config.currency !== "USD" && window.fx && window.fx.rates) {
            const rate = window.fx.rates[config.currency]
            setExchangeRate(rate)
            setLastUpdated(new Date().toLocaleTimeString())
          }
        }, [config.currency])

        const currencyInfo = SUPPORTED_CURRENCIES.find((c) => c.value === config.currency)

        const handleCurrencyChange = (currency) => {
          updateConfig({ currency })
          setShowCurrencyDropdown(false)

          // Show success notification
          const currencyInfo = SUPPORTED_CURRENCIES.find((c) => c.value === currency)
          if (currencyInfo) {
            showToast(`Currency changed to ${currencyInfo.label.split(" ")[0]} ${currency}`, "success")
          }
        }

        return React.createElement(
          "div",
          null,
          React.createElement(
            "div",
            {
              className: "header-gradient shadow-lg border-b border-opacity-20 sticky top-0 z-50 backdrop-blur-sm",
            },
            React.createElement(
              "div",
              { className: "container" },
              React.createElement(
                "div",
                { className: "flex items-center justify-between h-16" },
                React.createElement(
                  "div",
                  { className: "flex items-center space-x-3" },
                  React.createElement(
                    "div",
                    {
                      className: "w-12 h-12 p-1 rounded-xl bg-primary/10 backdrop-blur-sm flex items-center justify-center",
                    },
                    React.createElement("img", {
                      className: "w-8 h-8",
                      src: "https://raw.githubusercontent.com/drakeaxelrod/financial-atlas/refs/heads/main/piggybank.svg",
                    }),
                  ),
                  React.createElement(
                    "div",
                    null,
                    React.createElement("h1", {
                      className: "text-xl font-bold text-gray-800 header-title"
                    }, "Financial Atlas"),
                    React.createElement(
                      "div",
                      { className: "text-sm text-gray-600" },
                      "Your Financial Independence & Retirement Planner",
                    ),
                  ),
                ),
                React.createElement(
                  "div",
                  { className: "flex items-center space-x-4" },
                  React.createElement(
                    "div",
                    { className: "relative currency-dropdown" },
                    React.createElement(
                      "button",
                      {
                        onClick: () => setShowCurrencyDropdown(!showCurrencyDropdown),
                        className:
                          "flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all duration-200 border border-gray-300 text-gray-800 backdrop-blur-sm",
                      },
                      React.createElement("span", { className: "text-lg" }, currencyInfo.label.split(" ")[0]),
                      React.createElement("span", { className: "font-medium" }, currencyInfo.value),
                      React.createElement("i", { className: "fas fa-chevron-down text-sm opacity-70" }),
                    ),
                    showCurrencyDropdown &&
                      React.createElement(
                        "div",
                        {
                          className:
                            "absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-72 overflow-y-auto",
                        },
                        React.createElement(
                          "div",
                          { className: "p-1.5" },
                          SUPPORTED_CURRENCIES.map((currency) =>
                            React.createElement(
                              "button",
                              {
                                key: currency.value,
                                onClick: () => handleCurrencyChange(currency.value),
                                className: `w-full flex items-center space-x-2 px-2 py-1.5 text-left hover:bg-gray-50 rounded-lg transition-colors duration-200 ${
                                  config.currency === currency.value ? "bg-blue-50 text-blue-700" : "text-gray-700"
                                }`,
                              },
                              React.createElement("span", { className: "text-lg" }, currency.label.split(" ")[0]),
                              React.createElement(
                                "div",
                                { className: "flex-1" },
                                React.createElement("div", { className: "font-medium" }, currency.value),
                                React.createElement(
                                  "div",
                                  { className: "text-sm text-gray-500" },
                                  currency.label.split(" ").slice(1).join(" "),
                                ),
                              ),
                              config.currency === currency.value &&
                                React.createElement("i", { className: "fas fa-check text-blue-500" }),
                            ),
                          ),
                        ),
                      ),
                  ),
                  exchangeRate &&
                    config.currency !== "USD" &&
                    React.createElement(
                      "div",
                      { className: "hidden md:flex items-center space-x-2 text-xs text-gray-500" },
                      React.createElement("i", { className: "fas fa-exchange-alt" }),
                      React.createElement("span", null, `1 USD = ${exchangeRate.toFixed(2)} ${config.currency}`),
                    ),
                  React.createElement(
                    "div",
                    { className: "hidden lg:block text-xs text-gray-500" },
                    lastUpdated && `Updated: ${lastUpdated}`,
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "hidden lg:block text-xs text-gray-500 cursor-help",
                      title: "Keyboard Shortcuts: Ctrl+1-4 for tabs, Ctrl+R for refresh, Ctrl+M for simulation",
                    },
                    React.createElement("i", { className: "fas fa-keyboard mr-1" }),
                    "Shortcuts",
                  ),
                ),
              ),
            ),
          ),
          React.createElement(MarketTicker),
        )
      }

      function InputField({
        label,
        field,
        type = "number",
        prefix = "",
        suffix = "",
        min = 0,
        max,
        step = 1,
        tooltip = "",
      }) {
        const { config, updateConfig } = useConfig()
        const value = config[field]

        const handleChange = (e) => {
          const validatedValue = validateInput(e.target.value, min, max)
          updateConfig({ [field]: validatedValue })
        }

        return React.createElement(
          "div",
          { className: "form-group" },
          React.createElement(
            "label",
            { className: "form-label" },
            label,
            tooltip &&
              React.createElement(
                "span",
                {
                  className: "ml-1 text-gray-400 cursor-help",
                  title: tooltip,
                },
                "?",
              ),
          ),
          React.createElement(
            "div",
            { className: "relative" },
            prefix &&
              React.createElement(
                "span",
                {
                  className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",
                },
                prefix,
              ),
            React.createElement("input", {
              type,
              value,
              onChange: handleChange,
              min,
              max,
              step,
              className: `input-field ${prefix ? "pl-8" : ""} ${suffix ? "pr-8" : ""}`,
              placeholder: `Enter ${label.toLowerCase()}`,
            }),
            suffix &&
              React.createElement(
                "span",
                {
                  className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",
                },
                suffix,
              ),
          ),
        )
      }

      function SelectField({ label, field, options, tooltip = "" }) {
        const { config, updateConfig } = useConfig()
        const value = config[field]

        const handleChange = (e) => {
          updateConfig({ [field]: e.target.value })
        }

        return React.createElement(
          "div",
          { className: "form-group" },
          React.createElement(
            "label",
            { className: "form-label" },
            label,
            tooltip &&
              React.createElement(
                "span",
                {
                  className: "ml-1 text-gray-400 cursor-help",
                  title: tooltip,
                },
                "?",
              ),
          ),
          React.createElement(
            "select",
            {
              value,
              onChange: handleChange,
              className: "input-field",
            },
            options.map((opt) => React.createElement("option", { key: opt.value, value: opt.value }, opt.label)),
          ),
        )
      }

      function StatCard({ title, value, subtitle, icon, color = "primary", animated = true }) {
        const colorMap = {
          primary: "bg-blue-100 text-blue-600",
          secondary: "bg-gray-100 text-gray-600",
          success: "bg-green-100 text-green-600",
          warning: "bg-yellow-100 text-yellow-600",
          danger: "bg-red-100 text-red-600",
        }

        const [isVisible, setIsVisible] = useState(false)
        const cardRef = useRef(null)

        useEffect(() => {
          const observer = new IntersectionObserver(
            ([entry]) => {
              if (entry.isIntersecting) {
                setIsVisible(true)
                observer.disconnect()
              }
            },
            { threshold: 0.1 },
          )

          if (cardRef.current) {
            observer.observe(cardRef.current)
          }

          return () => observer.disconnect()
        }, [])

        return React.createElement(
          "div",
          {
            ref: cardRef,
            className: `stat-card hover-scale ${animated && isVisible ? "animate-in" : ""}`,
            style: { transitionDelay: animated ? `${Math.random() * 200}ms` : "0ms" },
          },
          React.createElement(
            "div",
            { className: `stat-icon ${colorMap[color]}` },
            React.createElement("i", { className: `fas fa-${icon}` }),
          ),
          React.createElement("div", { className: "stat-value" }, value),
          React.createElement("div", { className: "stat-label" }, title),
          subtitle && React.createElement("div", { className: "text-xs text-gray-500 mt-1" }, subtitle),
        )
      }

      function ChartComponent({ data, options = {}, type = "line", height = 350 }) {
        const chartRef = useRef(null)
        const chartInstanceRef = useRef(null)
        const { config } = useConfig()

        useEffect(() => {
          if (!chartRef.current || !window.echarts) return

          if (chartInstanceRef.current) {
            chartInstanceRef.current.dispose()
          }

          chartInstanceRef.current = window.echarts.init(chartRef.current)

          // Convert Chart.js data to ECharts format
          const convertToEChartsData = (chartData) => {
            const xAxisData = chartData.labels || []
            const series = []

            if (chartData.datasets) {
              chartData.datasets.forEach((dataset, index) => {
                const seriesItem = {
                  name: dataset.label || `Series ${index + 1}`,
                  type: type === 'line' ? 'line' : type,
                  data: dataset.data || [],
                  smooth: true,
                  symbolSize: 4,
                  lineStyle: {
                    width: 2,
                    color: dataset.borderColor || `#${Math.floor(Math.random()*16777215).toString(16)}`
                  },
                  itemStyle: {
                    color: dataset.borderColor || `#${Math.floor(Math.random()*16777215).toString(16)}`
                  },
                  areaStyle: dataset.fill ? {
                    opacity: 0.1,
                    color: dataset.backgroundColor || dataset.borderColor || `#${Math.floor(Math.random()*16777215).toString(16)}`
                  } : undefined
                }

                if (type === 'line' && dataset.fill) {
                  seriesItem.areaStyle = {
                    opacity: 0.1
                  }
                }

                series.push(seriesItem)
              })
            }

            return { xAxisData, series }
          }

          const { xAxisData, series } = convertToEChartsData(data)

          const defaultOptions = {
            backgroundColor: 'transparent',
            textStyle: {
              fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
              fontSize: 12
            },
            tooltip: {
              trigger: 'axis',
              backgroundColor: 'rgba(255, 255, 255, 0.95)',
              borderColor: '#e2e8f0',
              borderWidth: 1,
              textStyle: {
                color: '#374151',
                fontSize: 12
              },
              formatter: function(params) {
                let result = `<div style="font-weight: 600; margin-bottom: 4px;">${params[0].axisValue}</div>`
                params.forEach(param => {
                  const value = typeof param.value === 'number' ? formatCurrency(param.value, config.currency) : param.value
                  result += `<div style="margin: 2px 0;">
                    <span style="display: inline-block; width: 8px; height: 8px; border-radius: 50%; background: ${param.color}; margin-right: 6px;"></span>
                    ${param.seriesName}: ${value}
                  </div>`
                })
                return result
              }
            },
            legend: {
              top: 10,
              right: 10,
              textStyle: {
                color: '#64748b',
                fontSize: 12
              },
              itemGap: 20
            },
            grid: {
              left: '3%',
              right: '4%',
              bottom: '8%',
              top: '15%',
              containLabel: true
            },
            xAxis: {
              type: 'category',
              data: xAxisData,
              axisLine: {
                lineStyle: {
                  color: '#e2e8f0'
                }
              },
              axisTick: {
                show: false
              },
              axisLabel: {
                color: '#64748b',
                fontSize: 11
              }
            },
            yAxis: {
              type: 'value',
              axisLine: {
                show: false
              },
              axisTick: {
                show: false
              },
              axisLabel: {
                color: '#64748b',
                fontSize: 11,
                formatter: function(value) {
                  return formatCurrency(value, config.currency, true)
                }
              },
              splitLine: {
                lineStyle: {
                  color: '#f1f5f9',
                  type: 'dashed'
                }
              }
            },
            series: series
          }

          const mergedOptions = {
            ...defaultOptions,
            ...options
          }

          chartInstanceRef.current.setOption(mergedOptions)

          const handleResize = () => {
            if (chartInstanceRef.current) {
              chartInstanceRef.current.resize()
            }
          }

          window.addEventListener('resize', handleResize)

          return () => {
            window.removeEventListener('resize', handleResize)
            if (chartInstanceRef.current) {
              chartInstanceRef.current.dispose()
            }
          }
        }, [data, options, type, config.currency])

        return React.createElement("div", {
          ref: chartRef,
          style: { width: "100%", height: `${height}px` },
        })
      }

      function TabNavigation({ activeTab, setActiveTab, tabs }) {
        return React.createElement(
          "div",
          { className: "tabs" },
          tabs.map((tab) =>
            React.createElement(
              "button",
              {
                key: tab.id,
                className: `tab ${activeTab === tab.id ? "active" : ""}`,
                onClick: () => setActiveTab(tab.id),
                "data-tab": tab.id,
              },
              React.createElement("i", { className: `fas fa-${tab.icon} mr-2` }),
              tab.label,
            ),
          ),
        )
      }

      function Dashboard() {
        const { config } = useConfig()
        const { currency, currentAge, retirementAge } = config
        const investmentYears = Math.max(0, retirementAge - currentAge)
        const [simulation, setSimulation] = useState({ running: false, results: null, progress: 0 })

        useEffect(() => {
          // Auto-run Monte Carlo simulation on load
          const timer = setTimeout(() => {
            runSimulation()
          }, 1000) // Small delay to let the UI settle

          return () => clearTimeout(timer)
        }, [])

        const fire = useMemo(() => calculateFIRE(config), [config])
        const compound = useMemo(
          () =>
            calculateCompoundInterest({
              principal: config.currentSavings,
              monthlySavings: config.monthlySavings,
              annualRate: config.annualReturn,
              years: investmentYears,
              inflationRate: config.inflationRate,
            }),
          [config, investmentYears],
        )

        // Monte Carlo Simulation Logic
        const runSimulation = () => {
          setSimulation({ running: true, results: null, progress: 0 })

          const progressInterval = setInterval(() => {
            setSimulation((prev) => ({
              ...prev,
              progress: Math.min(prev.progress + Math.random() * 15, 95),
            }))
          }, 100)

          const { currentSavings, monthlySavings, annualReturn, volatility, numSimulations } = config
          const results = []
          let completedSimulations = 0
          let cancelled = false
          const batchSize = Math.min(100, numSimulations)

          const cancelSimulation = () => {
            cancelled = true
            clearInterval(progressInterval)
            setSimulation({ running: false, progress: 0, results: null })
          }

          window.cancelCurrentSimulation = cancelSimulation

          const runBatch = () => {
            if (cancelled) return

            const currentBatch = Math.min(batchSize, numSimulations - completedSimulations)

            for (let i = 0; i < currentBatch; i++) {
              if (cancelled) return

              let balance = currentSavings
              for (let year = 0; year < investmentYears; year++) {
                const randomReturn = annualReturn + (Math.random() - 0.5) * volatility
                balance += monthlySavings * 12
                balance *= 1 + randomReturn / 100
              }
              results.push(balance)
            }

            completedSimulations += currentBatch
            const progress = (completedSimulations / numSimulations) * 100

            setSimulation((prev) => ({
              ...prev,
              progress: Math.min(progress, 100),
            }))

            if (completedSimulations < numSimulations && !cancelled) {
              setTimeout(runBatch, 10)
            } else if (!cancelled) {
              clearInterval(progressInterval)
              results.sort((a, b) => a - b)
              const percentile10 = results[Math.floor(results.length * 0.1)]
              const median = results[Math.floor(results.length * 0.5)]
              const percentile90 = results[Math.floor(results.length * 0.9)]
              setSimulation({
                running: false,
                progress: 100,
                results: { percentile10, median, percentile90 },
              })

              showToast(
                `Monte Carlo simulation completed with ${numSimulations.toLocaleString()} iterations!`,
                "success",
              )

              window.cancelCurrentSimulation = null
            }
          }

          setTimeout(runBatch, 100)
        }

        const cancelSimulation = () => {
          if (window.cancelCurrentSimulation) {
            window.cancelCurrentSimulation()
          }
        }

        const calculatedRetirementAge =
          fire.yearsToFIRE !== Infinity ? Math.round(currentAge + fire.yearsToFIRE) : "N/A"

        // Charts Data
        const compoundChartData = {
          labels: compound.yearlyData.map((d) => `Year ${d.year}`),
          datasets: [
            {
              label: "Total Value",
              data: compound.yearlyData.map((d) => d.totalValue),
              borderColor: "#3B82F6",
              backgroundColor: "rgba(59, 130, 246, 0.1)",
              fill: true,
              tension: 0.4,
            },
            {
              label: "Contributions",
              data: compound.yearlyData.map((d) => d.principal),
              borderColor: "#10B981",
              backgroundColor: "rgba(16, 185, 129, 0.1)",
              fill: true,
              tension: 0.4,
            },
          ],
        }

        return React.createElement(
          "div",
          { className: "fade-in" },

          // Top Row: Key Metrics
          React.createElement(
            "div",
            { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6" },

            // Key Metrics Cards - Compact layout
            React.createElement(
              "div",
              { className: "card p-4 bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-500" },
              React.createElement(
                "div",
                { className: "flex items-center justify-between" },
                React.createElement(
                  "div",
                  null,
                  React.createElement("div", { className: "text-2xl font-bold text-blue-600" }, formatCurrency(fire.fireNumber, currency, true)),
                  React.createElement("div", { className: "text-xs text-gray-600 font-medium" }, "FIRE Target"),
                ),
                React.createElement("i", { className: "fas fa-bullseye text-blue-500 text-xl" }),
              ),
            ),
            React.createElement(
              "div",
              { className: "card p-4 bg-gradient-to-br from-orange-50 to-orange-100 border-l-4 border-orange-500" },
              React.createElement(
                "div",
                { className: "flex items-center justify-between" },
                React.createElement(
                  "div",
                  null,
                  React.createElement("div", { className: "text-2xl font-bold text-orange-600" }, fire.yearsToFIRE < 100 ? fire.yearsToFIRE.toFixed(1) : "100+"),
                  React.createElement("div", { className: "text-xs text-gray-600 font-medium" }, "Years to FIRE"),
                ),
                React.createElement("i", { className: "fas fa-clock text-orange-500 text-xl" }),
              ),
            ),
            React.createElement(
              "div",
              { className: "card p-4 bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500" },
              React.createElement(
                "div",
                { className: "flex items-center justify-between" },
                React.createElement(
                  "div",
                  null,
                  React.createElement("div", { className: "text-2xl font-bold text-green-600" }, formatCurrency(compound.totalValue, currency, true)),
                  React.createElement("div", { className: "text-xs text-gray-600 font-medium" }, `Projected (${investmentYears}y)`),
                ),
                React.createElement("i", { className: "fas fa-chart-line text-green-500 text-xl" }),
              ),
            ),
            React.createElement(
              "div",
              { className: "card p-4 bg-gradient-to-br from-purple-50 to-purple-100 border-l-4 border-purple-500" },
              React.createElement(
                "div",
                { className: "flex items-center justify-between" },
                React.createElement(
                  "div",
                  null,
                  React.createElement("div", { className: "text-2xl font-bold text-purple-600" }, calculatedRetirementAge),
                  React.createElement("div", { className: "text-xs text-gray-600 font-medium" }, "Retirement Age"),
                ),
                React.createElement("i", { className: "fas fa-birthday-cake text-purple-500 text-xl" }),
              ),
            ),
          ),

          // Main Content Area - 2 columns
          React.createElement(
            "div",
            { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6" },

            // Left Column: Charts and Analysis
            React.createElement(
              "div",
              { className: "lg:col-span-2 space-y-6" },

              // Investment Growth Chart - More compact
              React.createElement(
                "div",
                { className: "card p-5" },
                React.createElement(
                  "div",
                  { className: "flex justify-between items-center mb-3" },
                  React.createElement("h3", { className: "text-lg font-semibold flex items-center gap-2" },
                    React.createElement("i", { className: "fas fa-chart-line text-blue-500" }),
                    "Investment Growth"
                  ),
                  React.createElement("div", { className: "text-xs text-gray-500" }, `${investmentYears} year projection`),
                ),
                React.createElement(ChartComponent, { data: compoundChartData, height: 280 }),
                React.createElement(
                  "div",
                  { className: "mt-3 grid grid-cols-3 gap-3 text-center" },
                  React.createElement(
                    "div",
                    { className: "p-3 bg-blue-50 rounded-lg" },
                    React.createElement("div", { className: "text-lg font-bold text-blue-600" }, formatCurrency(compound.totalValue, currency, true)),
                    React.createElement("div", { className: "text-xs text-gray-600" }, "Total Value"),
                  ),
                  React.createElement(
                    "div",
                    { className: "p-3 bg-green-50 rounded-lg" },
                    React.createElement("div", { className: "text-lg font-bold text-green-600" }, formatCurrency(compound.totalContributions, currency, true)),
                    React.createElement("div", { className: "text-xs text-gray-600" }, "Contributions"),
                  ),
                  React.createElement(
                    "div",
                    { className: "p-3 bg-orange-50 rounded-lg" },
                    React.createElement("div", { className: "text-lg font-bold text-orange-600" }, formatCurrency(compound.totalInterest, currency, true)),
                    React.createElement("div", { className: "text-xs text-gray-600" }, "Interest Earned"),
                  ),
                ),
              ),

              // FIRE Progress - Compact
              React.createElement(
                "div",
                { className: "card p-5" },
                React.createElement(
                  "div",
                  { className: "flex items-center gap-2 mb-4" },
                  React.createElement("i", { className: "fas fa-fire text-orange-500" }),
                  React.createElement("h3", { className: "text-lg font-semibold" }, "FIRE Progress"),
                  React.createElement(
                    "span",
                    { className: "ml-auto text-sm font-medium text-gray-600" },
                    `${fire.progressPercentage.toFixed(1)}% Complete`
                  ),
                ),
                React.createElement(
                  "div",
                  { className: "progress-bar mb-4" },
                  React.createElement("div", {
                    className: "progress-fill",
                    style: { width: `${Math.min(fire.progressPercentage, 100)}%` },
                  }),
                ),
                React.createElement(
                  "div",
                  { className: "grid grid-cols-2 gap-3" },
                  React.createElement(
                    "div",
                    { className: "text-center p-3 bg-gray-50 rounded-lg" },
                    React.createElement("div", { className: "text-lg font-bold text-gray-800" }, formatCurrency(config.currentSavings, currency, true)),
                    React.createElement("div", { className: "text-xs text-gray-600" }, "Current Savings"),
                  ),
                  React.createElement(
                    "div",
                    { className: "text-center p-3 bg-red-50 rounded-lg" },
                    React.createElement("div", { className: "text-lg font-bold text-red-600" }, formatCurrency(fire.stillNeeded, currency, true)),
                    React.createElement("div", { className: "text-xs text-gray-600" }, "Still Needed"),
                  ),
                ),
              ),
            ),

            // Right Column: Tools and Controls
            React.createElement(
              "div",
              { className: "space-y-6" },

              // Monte Carlo Simulation - Compact with auto-run
              React.createElement(
                "div",
                { className: "card p-4" },
                React.createElement(
                  "div",
                  { className: "flex items-center gap-2 mb-3" },
                  React.createElement("i", { className: "fas fa-dice text-purple-500" }),
                  React.createElement("h3", { className: "text-base font-semibold" }, "Monte Carlo"),
                  React.createElement(
                    "span",
                    { className: "ml-auto text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full" },
                    "Auto-runs on load"
                  ),
                ),
                React.createElement(
                  "p",
                  { className: "text-xs text-gray-600 mb-3" },
                  "Probabilistic retirement outcome analysis"
                ),
                React.createElement(
                  "div",
                  { className: "space-y-3 mb-3" },
                  React.createElement(InputField, {
                    label: "Volatility",
                    field: "volatility",
                    suffix: "%",
                    min: 0,
                    max: 50,
                    tooltip: "Market volatility (15-20% typical)",
                  }),
                  React.createElement(InputField, {
                    label: "Simulations",
                    field: "numSimulations",
                    min: 100,
                    max: 10000,
                    step: 100,
                    tooltip: "Number of simulation runs",
                  }),
                ),
                React.createElement(
                  "div",
                  { className: "flex gap-2 mb-3" },
                  React.createElement(
                    "button",
                    {
                      onClick: runSimulation,
                      disabled: simulation.running,
                      className: `btn btn-primary flex-1 text-sm ${simulation.running ? "shimmer" : ""}`,
                    },
                    simulation.running
                      ? `Running ${Math.round(simulation.progress)}%`
                      : "Run Simulation",
                  ),
                  simulation.running &&
                    React.createElement(
                      "button",
                      {
                        onClick: cancelSimulation,
                        className: "btn bg-red-500 hover:bg-red-600 text-white px-3 text-sm",
                      },
                      React.createElement("i", { className: "fas fa-stop" }),
                    ),
                ),
                simulation.running &&
                  React.createElement(
                    "div",
                    { className: "progress-bar mb-3" },
                    React.createElement("div", {
                      className: "progress-fill",
                      style: { width: `${simulation.progress}%` },
                    }),
                  ),
                simulation.results &&
                  React.createElement(
                    "div",
                    { className: "space-y-2 slide-in" },
                    React.createElement(
                      "div",
                      { className: "text-center p-2 bg-red-50 rounded border-l-3 border-red-400" },
                      React.createElement("div", { className: "text-sm font-bold text-red-600" }, formatCurrency(simulation.results.percentile10, currency, true)),
                      React.createElement("div", { className: "text-xs text-gray-600" }, "Pessimistic (10%)"),
                    ),
                    React.createElement(
                      "div",
                      { className: "text-center p-2 bg-blue-50 rounded border-l-3 border-blue-400" },
                      React.createElement("div", { className: "text-sm font-bold text-blue-600" }, formatCurrency(simulation.results.median, currency, true)),
                      React.createElement("div", { className: "text-xs text-gray-600" }, "Expected (50%)"),
                    ),
                    React.createElement(
                      "div",
                      { className: "text-center p-2 bg-green-50 rounded border-l-3 border-green-400" },
                      React.createElement("div", { className: "text-sm font-bold text-green-600" }, formatCurrency(simulation.results.percentile90, currency, true)),
                      React.createElement("div", { className: "text-xs text-gray-600" }, "Optimistic (90%)"),
                    ),
                  ),
              ),

              // Quick Actions
              React.createElement(
                "div",
                { className: "card p-4" },
                React.createElement(
                  "h3",
                  { className: "text-base font-semibold mb-3 flex items-center gap-2" },
                  React.createElement("i", { className: "fas fa-bolt text-yellow-500" }),
                  "Quick Actions"
                ),
                React.createElement(
                  "div",
                  { className: "space-y-2" },
                  React.createElement(
                    "button",
                    {
                      onClick: () => window.dispatchEvent(new CustomEvent("switchTab", { detail: "settings" })),
                      className: "w-full btn btn-ghost text-left text-sm justify-start",
                    },
                    React.createElement("i", { className: "fas fa-cog mr-2" }),
                    "Update Settings"
                  ),
                  hasTiingoAPIKey() && React.createElement(
                    "button",
                    {
                      onClick: () => window.dispatchEvent(new CustomEvent("switchTab", { detail: "market" })),
                      className: "w-full btn btn-ghost text-left text-sm justify-start",
                    },
                    React.createElement("i", { className: "fas fa-chart-area mr-2" }),
                    "View Market Data"
                  ),
                  React.createElement(
                    "button",
                    {
                      onClick: () => window.dispatchEvent(new CustomEvent("switchTab", { detail: "guide" })),
                      className: "w-full btn btn-ghost text-left text-sm justify-start",
                    },
                    React.createElement("i", { className: "fas fa-book-open mr-2" }),
                    "Read Guides"
                  ),
                ),
              ),

              // Key Insights
              React.createElement(
                "div",
                { className: "card p-4" },
                React.createElement(
                  "h3",
                  { className: "text-base font-semibold mb-3 flex items-center gap-2" },
                  React.createElement("i", { className: "fas fa-lightbulb text-yellow-500" }),
                  "Insights"
                ),
                React.createElement(
                  "div",
                  { className: "space-y-3 text-sm text-gray-600" },
                  fire.yearsToFIRE < 10 && React.createElement(
                    "div",
                    { className: "flex items-start gap-2 p-2 bg-green-50 rounded" },
                    React.createElement("i", { className: "fas fa-check-circle text-green-500 mt-0.5" }),
                    React.createElement("span", null, "You're on track for early retirement!")
                  ),
                  fire.yearsToFIRE > 40 && React.createElement(
                    "div",
                    { className: "flex items-start gap-2 p-2 bg-orange-50 rounded" },
                    React.createElement("i", { className: "fas fa-exclamation-triangle text-orange-500 mt-0.5" }),
                    React.createElement("span", null, "Consider increasing monthly contributions or expected returns.")
                  ),
                  React.createElement(
                    "div",
                    { className: "flex items-start gap-2 p-2 bg-blue-50 rounded" },
                    React.createElement("i", { className: "fas fa-info-circle text-blue-500 mt-0.5" }),
                    React.createElement("span", null, `At ${config.monthlySavings > 0 ? formatCurrency(config.monthlySavings * 12, currency, true) : '$0'}/year savings rate`)
                  ),
                  compound.totalInterest > compound.totalContributions && React.createElement(
                    "div",
                    { className: "flex items-start gap-2 p-2 bg-purple-50 rounded" },
                    React.createElement("i", { className: "fas fa-magic text-purple-500 mt-0.5" }),
                    React.createElement("span", null, "Compound interest will exceed your contributions!")
                  ),
                ),
              ),
            ),
          ),
        )
      }

      function CompoundInterestCalculator() {
        const { config } = useConfig()
        const { currency, currentAge, retirementAge } = config
        const investmentYears = Math.max(0, retirementAge - currentAge)

        const results = useMemo(
          () =>
            calculateCompoundInterest({
              principal: config.currentSavings,
              monthlySavings: config.monthlySavings,
              annualRate: config.annualReturn,
              years: investmentYears,
              inflationRate: config.inflationRate,
            }),
          [config, investmentYears],
        )

        const chartData = {
          labels: results.yearlyData.map((d) => d.year),
          datasets: [
            {
              label: "Total Value",
              data: results.yearlyData.map((d) => d.totalValue),
              borderColor: "#3B82F6",
              backgroundColor: "rgba(59, 130, 246, 0.1)",
              fill: true,
            },
            {
              label: "Contributions",
              data: results.yearlyData.map((d) => d.principal),
              borderColor: "#10B981",
              backgroundColor: "rgba(16, 185, 129, 0.1)",
              fill: true,
            },
          ],
        }

        return React.createElement(
          "div",
          { className: "fade-in" },
          React.createElement(
            "div",
            { className: "chart-container" },
            React.createElement("h3", { className: "text-lg font-semibold mb-4" }, "Compound Interest Growth"),
            React.createElement(ChartComponent, { data: chartData }),
          ),
          React.createElement(
            "div",
            { className: "card p-6 text-center" },
            React.createElement("h4", { className: "text-lg font-semibold mb-4" }, "Investment Summary"),
            React.createElement(
              "p",
              { className: "text-gray-600" },
              `After ${investmentYears} years, your estimated savings will be `,
              React.createElement(
                "strong",
                { className: "text-primary" },
                formatCurrency(results.totalValue, currency),
              ),
              ", with ",
              React.createElement(
                "strong",
                { className: "text-success" },
                formatCurrency(results.totalContributions, currency),
              ),
              " in contributions and ",
              React.createElement(
                "strong",
                { className: "text-warning" },
                formatCurrency(results.totalInterest, currency),
              ),
              " in compound interest.",
            ),
          ),
        )
      }

      function FIRECalculator() {
        const { config } = useConfig()
        const { currency, currentAge } = config
        const results = useMemo(() => calculateFIRE(config), [config])

        const retirementAge = results.yearsToFIRE !== Infinity ? Math.round(currentAge + results.yearsToFIRE) : "N/A"

        return React.createElement(
          "div",
          { className: "fade-in" },
          React.createElement(
            "div",
            { className: "stats-grid" },
            React.createElement(StatCard, {
              title: "FIRE Number",
              value: formatCurrency(results.fireNumber, currency),
              subtitle: "Your retirement goal",
              icon: "bullseye",
              color: "primary",
            }),
            React.createElement(StatCard, {
              title: "Years to FIRE",
              value: results.yearsToFIRE < 100 ? results.yearsToFIRE.toFixed(1) : "100+",
              subtitle: "Time until retirement",
              icon: "clock",
              color: "warning",
            }),
            React.createElement(StatCard, {
              title: "Still Needed",
              value: formatCurrency(results.stillNeeded, currency),
              subtitle: "Remaining to reach goal",
              icon: "coins",
              color: "danger",
            }),
          ),
          React.createElement(
            "div",
            { className: "card p-6" },
            React.createElement(
              "h4",
              { className: "text-lg font-semibold mb-4" },
              "Progress to Financial Independence",
            ),
            React.createElement(
              "div",
              { className: "progress-bar" },
              React.createElement("div", {
                className: "progress-fill",
                style: { width: `${Math.min(results.progressPercentage, 100)}%` },
              }),
            ),
            React.createElement(
              "div",
              { className: "flex justify-between items-center" },
              React.createElement("span", { className: "text-sm text-gray-600" }, "Progress"),
              React.createElement(
                "span",
                { className: "text-lg font-semibold text-primary" },
                `${formatPercentage(results.progressPercentage)} Complete`,
              ),
            ),
          ),
          React.createElement(
            "div",
            { className: "card p-6 text-center" },
            React.createElement("h4", { className: "text-lg font-semibold mb-4" }, "Your FIRE Timeline"),
            React.createElement(
              "p",
              { className: "text-gray-600" },
              `Based on your current savings plan, you could reach financial independence at age ${retirementAge}.`,
            ),
          ),
        )
      }

      function MonteCarloSimulator() {
        const { config } = useConfig()
        const { currency, currentAge, retirementAge } = config
        const investmentYears = Math.max(0, retirementAge - currentAge)
        const [simulation, setSimulation] = useState({ running: false, results: null, progress: 0 })

        const runSimulation = () => {
          setSimulation({ running: true, results: null, progress: 0 })

          // Simulate progress updates
          const progressInterval = setInterval(() => {
            setSimulation((prev) => ({
              ...prev,
              progress: Math.min(prev.progress + Math.random() * 15, 95),
            }))
          }, 100)

          // Enhanced Monte Carlo simulation with user-controlled batch processing
          const { currentSavings, monthlySavings, annualReturn, volatility, numSimulations } = config
          const results = []
          let completedSimulations = 0
          let cancelled = false
          const batchSize = Math.min(100, numSimulations) // Process in batches for better performance

          // Store cancel function for cleanup
          const cancelSimulation = () => {
            cancelled = true
            clearInterval(progressInterval)
            setSimulation({ running: false, progress: 0, results: null })
          }

          // Store cancel function globally for access
          window.cancelCurrentSimulation = cancelSimulation

          const runBatch = () => {
            if (cancelled) return

            const currentBatch = Math.min(batchSize, numSimulations - completedSimulations)

            for (let i = 0; i < currentBatch; i++) {
              if (cancelled) return

              let balance = currentSavings
              for (let year = 0; year < investmentYears; year++) {
                const randomReturn = annualReturn + (Math.random() - 0.5) * volatility
                balance += monthlySavings * 12
                balance *= 1 + randomReturn / 100
              }
              results.push(balance)
            }

            completedSimulations += currentBatch
            const progress = (completedSimulations / numSimulations) * 100

            setSimulation((prev) => ({
              ...prev,
              progress: Math.min(progress, 100),
            }))

            if (completedSimulations < numSimulations && !cancelled) {
              // Continue processing in next frame for better UI responsiveness
              setTimeout(runBatch, 10)
            } else if (!cancelled) {
              // All simulations complete
              clearInterval(progressInterval)
              results.sort((a, b) => a - b)
              const percentile10 = results[Math.floor(results.length * 0.1)]
              const median = results[Math.floor(results.length * 0.5)]
              const percentile90 = results[Math.floor(results.length * 0.9)]
              setSimulation({
                running: false,
                progress: 100,
                results: { percentile10, median, percentile90 },
              })

              // Show success notification
              showToast(
                `Monte Carlo simulation completed with ${numSimulations.toLocaleString()} iterations!`,
                "success",
              )

              // Track simulation completion
              trackCalculatorUsage("monte_carlo_simulation", {
                numSimulations,
                results: { percentile10, median, percentile90 },
              })

              // Clean up cancel function
              window.cancelCurrentSimulation = null
            }
          }

          // Start batch processing
          setTimeout(runBatch, 100)
        }

        const cancelSimulation = () => {
          if (window.cancelCurrentSimulation) {
            window.cancelCurrentSimulation()
          }
        }

        return React.createElement(
          "div",
          { className: "fade-in" },
          React.createElement(
            "div",
            { className: "gradient-border" },
            React.createElement(
              "div",
              null,
              React.createElement("h3", { className: "text-lg font-semibold mb-4" }, "Monte Carlo Simulation"),
              React.createElement(
                "p",
                { className: "text-gray-600 mb-6" },
                "Run thousands of simulations to see a probabilistic range of your potential retirement savings based on market volatility.",
              ),
              React.createElement(
                "div",
                { className: "form-grid mb-6" },
                React.createElement(InputField, {
                  label: "Market Volatility",
                  field: "volatility",
                  suffix: "%",
                  min: 0,
                  max: 50,
                  tooltip:
                    "Historical average is around 15-20% for stock markets. Higher volatility = wider range of outcomes.",
                }),
                React.createElement(InputField, {
                  label: "Number of Simulations",
                  field: "numSimulations",
                  min: 100,
                  max: 10000,
                  step: 100,
                  tooltip:
                    "More simulations = more accurate results but longer processing time. Recommended: 1000-5000.",
                }),
              ),
              React.createElement(
                "div",
                { className: "flex items-center gap-4 mb-6" },
                React.createElement(
                  "div",
                  { className: "flex items-center gap-2" },
                  React.createElement("i", { className: "fas fa-info-circle text-blue-500" }),
                  React.createElement(
                    "span",
                    { className: "text-sm text-gray-600" },
                    `${config.numSimulations.toLocaleString()} simulations will be run`,
                  ),
                ),
                React.createElement(
                  "div",
                  { className: "flex items-center gap-2" },
                  React.createElement("i", { className: "fas fa-clock text-green-500" }),
                  React.createElement(
                    "span",
                    { className: "text-sm text-gray-600" },
                    `Est. time: ${Math.ceil(config.numSimulations / 1000)}s`,
                  ),
                ),
              ),
              React.createElement(
                "div",
                { className: "mb-6" },
                React.createElement(
                  "div",
                  { className: "flex items-center gap-2 mb-2" },
                  React.createElement("span", { className: "text-sm font-medium text-gray-700" }, "Quick Presets:"),
                ),
                React.createElement(
                  "div",
                  { className: "flex gap-2 flex-wrap" },
                  [500, 1000, 2500, 5000, 10000].map((count) =>
                    React.createElement(
                      "button",
                      {
                        key: count,
                        onClick: () => updateConfig("numSimulations", count),
                        className: `px-3 py-1 text-xs rounded-full border transition-all ${
                          config.numSimulations === count
                            ? "bg-blue-500 text-white border-blue-500"
                            : "bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"
                        }`,
                      },
                      `${count.toLocaleString()}`,
                    ),
                  ),
                ),
              ),
              React.createElement(
                "div",
                { className: "flex gap-3" },
                React.createElement(
                  "button",
                  {
                    onClick: runSimulation,
                    disabled: simulation.running,
                    "data-simulation": "run",
                    className: `btn btn-primary flex-1 ${simulation.running ? "shimmer" : ""}`,
                  },
                  simulation.running
                    ? React.createElement(
                        "span",
                        { className: "flex items-center justify-center gap-2" },
                        React.createElement("span", { className: "loading-spinner" }),
                        `Running... ${Math.round(simulation.progress)}%`,
                      )
                    : React.createElement(
                        "span",
                        { className: "flex items-center justify-center gap-2" },
                        React.createElement("i", { className: "fas fa-play" }),
                        "Run Monte Carlo Simulation",
                      ),
                ),
                simulation.running &&
                  React.createElement(
                    "button",
                    {
                      onClick: cancelSimulation,
                      className: "btn bg-red-500 hover:bg-red-600 text-white px-4",
                    },
                    React.createElement("i", { className: "fas fa-stop" }),
                  ),
              ),
              simulation.running &&
                React.createElement(
                  "div",
                  { className: "progress-bar mt-4" },
                  React.createElement("div", {
                    className: "progress-fill",
                    style: { width: `${simulation.progress}%` },
                  }),
                ),
            ),
          ),
          simulation.results &&
            React.createElement(
              "div",
              { className: "stats-grid mt-4 slide-in" },
              React.createElement(StatCard, {
                title: "Pessimistic (10th %)",
                value: formatCurrency(simulation.results.percentile10, currency),
                subtitle: "Worst 10% of outcomes",
                icon: "arrow-down",
                color: "danger",
                animated: true,
              }),
              React.createElement(StatCard, {
                title: "Expected (50th %)",
                value: formatCurrency(simulation.results.median, currency),
                subtitle: "Median result",
                icon: "balance-scale",
                color: "primary",
                animated: true,
              }),
              React.createElement(StatCard, {
                title: "Optimistic (90th %)",
                value: formatCurrency(simulation.results.percentile90, currency),
                subtitle: "Best 10% of outcomes",
                icon: "arrow-up",
                color: "success",
                animated: true,
              }),
            ),
        )
      }

      function Guide() {
        const [selectedArticle, setSelectedArticle] = useState(null)

        const articles = [
          {
            id: "fire",
            icon: "fire",
            title: "Understanding FIRE (Financial Independence, Retire Early)",
            content: `
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl mb-6 border border-blue-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">What is FIRE?</h3>
                            <p class="text-gray-600">FIRE stands for Financial Independence, Retire Early. It's a lifestyle movement focused on extreme saving and investing to allow retirement much earlier than traditional retirement plans.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-blue-600">Core FIRE Principles</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏦 High Savings Rate</h4>
                                <p class="text-sm text-gray-600">FIRE adherents typically save 50-70% of their income, far exceeding the traditional 10-20% recommendation.</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">💰 Aggressive Investing</h4>
                                <p class="text-sm text-gray-600">Focus on low-cost index funds and ETFs with consistent market returns over time.</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Expense Optimization</h4>
                                <p class="text-sm text-gray-600">Ruthlessly cutting unnecessary expenses while maintaining quality of life.</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📊 Data-Driven Approach</h4>
                                <p class="text-sm text-gray-600">Using calculators and tracking to optimize every financial decision.</p>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-blue-600">Types of FIRE</h3>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-start space-x-3">
                                <span class="text-amber-500 font-bold mt-1">•</span>
                                <div>
                                    <strong class="text-gray-800">Lean FIRE:</strong>
                                    <span class="text-gray-600 ml-2">Retiring with minimal expenses (typically $40,000-$50,000 annually)</span>
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="text-amber-500 font-bold mt-1">•</span>
                                <div>
                                    <strong class="text-gray-800">Regular FIRE:</strong>
                                    <span class="text-gray-600 ml-2">Maintaining current lifestyle in retirement ($50,000-$100,000 annually)</span>
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="text-amber-500 font-bold mt-1">•</span>
                                <div>
                                    <strong class="text-gray-800">Fat FIRE:</strong>
                                    <span class="text-gray-600 ml-2">Retiring with a luxurious lifestyle ($100,000+ annually)</span>
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="text-amber-500 font-bold mt-1">•</span>
                                <div>
                                    <strong class="text-gray-800">Coast FIRE:</strong>
                                    <span class="text-gray-600 ml-2">Having enough saved that compound interest will grow to retirement needs by traditional retirement age</span>
                                </div>
                            </li>
                        </ul>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                            <h4 class="font-semibold text-blue-800 mb-2">💡 Pro Tip</h4>
                            <p class="text-sm text-blue-700">Start with small improvements to your savings rate. Even increasing from 10% to 20% can cut decades off your working career!</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-blue-600">Getting Started</h3>
                        <ol class="list-decimal list-inside space-y-2 text-gray-600">
                            <li>Calculate your current expenses and savings rate</li>
                            <li>Set a target FIRE number (typically 25x annual expenses)</li>
                            <li>Open investment accounts (401k, IRA, taxable brokerage)</li>
                            <li>Choose low-cost index funds</li>
                            <li>Automate investments and track progress</li>
                        </ol>
                    `,
          },
          {
            id: "4-percent-rule",
            icon: "calculator",
            title: "The 4% Safe Withdrawal Rate (SWR)",
            content: `
                        <div class="bg-gradient-to-r from-amber-50 to-yellow-50 p-6 rounded-xl mb-6 border border-amber-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">The Foundation of FIRE</h3>
                            <p class="text-gray-600">The 4% Rule is the cornerstone of FIRE planning, determining how much you can safely withdraw from your portfolio each year in retirement.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-amber-600">How the 4% Rule Works</h3>
                        <p class="mb-4 text-gray-600">Based on the Trinity Study and historical market data, withdrawing 4% of your initial portfolio value annually (adjusted for inflation) has a 95% success rate over 30-year periods.</p>

                        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
                            <h4 class="font-semibold text-gray-800 mb-3">📊 The Math</h4>
                            <div class="space-y-2 text-sm">
                                <p class="text-gray-600"><strong>FIRE Number = Annual Expenses ÷ 0.04</strong></p>
                                <p class="text-gray-600">Or: <strong>Annual Expenses × 25</strong></p>
                                <div class="bg-blue-50 p-3 rounded mt-3 border border-blue-200">
                                    <p class="text-blue-700"><strong>Example:</strong> If you spend $50,000/year, your FIRE number is $1,250,000</p>
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-amber-600">Historical Context</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📈 Trinity Study (1998)</h4>
                                <p class="text-sm text-gray-600">Analyzed withdrawal rates from 1925-1995, showing 4% succeeded in 95% of 30-year periods.</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏛️ Portfolio Composition</h4>
                                <p class="text-sm text-gray-600">Based on 50-75% stocks, 25-50% bonds for balanced growth and stability.</p>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-amber-600">Modern Considerations</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border-l-4 border-amber-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Sequence of Returns Risk</h4>
                                <p class="text-sm text-gray-600 mt-1">Poor market performance early in retirement can devastate a portfolio. Consider a lower withdrawal rate (3-3.5%) for early retirement.</p>
                            </div>
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Inflation Impact</h4>
                                <p class="text-sm text-gray-600 mt-1">Current low interest rates and potential higher inflation may require adjusting the traditional 4% rule.</p>
                            </div>
                            <div class="border-l-4 border-green-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Flexible Withdrawal</h4>
                                <p class="text-sm text-gray-600 mt-1">Consider guardrails: reduce spending in bad market years, increase in good years.</p>
                            </div>
                        </div>

                        <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
                            <h4 class="font-semibold text-amber-800 mb-2">⚠️ Important Note</h4>
                            <p class="text-sm text-amber-700">The 4% rule is a guideline, not a guarantee. Market conditions, inflation, and personal circumstances all matter. Many FIRE practitioners use 3-3.5% to be conservative.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-amber-600">Alternative Withdrawal Strategies</h3>
                        <ul class="space-y-3">
                            <li class="flex items-start space-x-3">
                                <span class="text-amber-500 font-bold mt-1">•</span>
                                <div>
                                    <strong class="text-gray-800">Bond Tent:</strong>
                                    <span class="text-gray-600 ml-2">Gradually increase bond allocation as you approach retirement</span>
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="text-amber-500 font-bold mt-1">•</span>
                                <div>
                                    <strong class="text-gray-800">Bucket Strategy:</strong>
                                    <span class="text-gray-600 ml-2">Separate short-term (cash), medium-term (bonds), and long-term (stocks) buckets</span>
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="text-amber-500 font-bold mt-1">•</span>
                                <div>
                                    <strong class="text-gray-800">Dynamic Withdrawal:</strong>
                                    <span class="text-gray-600 ml-2">Adjust withdrawal rates based on market performance and portfolio value</span>
                                </div>
                            </li>
                        </ul>
                    `,
          },
          {
            id: "lazy-portfolios",
            icon: "chart-pie",
            title: "Lazy Portfolios & Index Investing",
            content: `
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl mb-6 border border-green-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Set It and Forget It Investing</h3>
                            <p class="text-gray-600">Lazy portfolios are simple, low-maintenance investment strategies that outperform most active management with minimal effort.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-green-600">Why Lazy Portfolios Work</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">💸 Low Costs</h4>
                                <p class="text-sm text-gray-600">Index funds have expense ratios of 0.03-0.20% vs 0.5-2% for actively managed funds.</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📈 Market Returns</h4>
                                <p class="text-sm text-gray-600">Captures full market performance without trying to beat it.</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Simplicity</h4>
                                <p class="text-sm text-gray-600">No need to research individual stocks or time the market.</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🔄 Automatic Diversification</h4>
                                <p class="text-sm text-gray-600">Instant exposure to hundreds or thousands of companies.</p>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-green-600">Popular Lazy Portfolio Strategies</h3>

                        <div class="space-y-6 mb-6">
                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-3">🏆 Three-Fund Portfolio</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-600">Total Stock Market (VTSAX/VTI)</span>
                                        <span class="font-medium text-gray-800">60-70%</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-600">International Stock (VTIAX/VXUS)</span>
                                        <span class="font-medium text-gray-800">20-30%</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-600">Total Bond Market (VBTLX/BND)</span>
                                        <span class="font-medium text-gray-800">10-20%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-3">🎯 Target Date Funds</h4>
                                <p class="text-sm text-gray-600 mb-2">Single fund that automatically adjusts allocation based on retirement date.</p>
                                <div class="text-sm text-gray-600">
                                    <strong>Examples:</strong> VTRLX (2055), VTTSX (2060), VFORX (2040)
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-green-600">Recommended Brokers & Funds</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏛️ Vanguard</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• VTSAX (Total Stock)</li>
                                    <li>• VTIAX (International)</li>
                                    <li>• VBTLX (Bonds)</li>
                                    <li>• Ultra-low fees</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">💎 Fidelity</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• FZROX (Zero fees!)</li>
                                    <li>• FTIHX (International)</li>
                                    <li>• FXNAX (Bonds)</li>
                                    <li>• Great interface</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Charles Schwab</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• SWTSX (Total Stock)</li>
                                    <li>• SWISX (International)</li>
                                    <li>• SWAGX (Bonds)</li>
                                    <li>• Excellent service</li>
                                </ul>
                            </div>
                        </div>

                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                            <h4 class="font-semibold text-green-800 mb-2">💡 Rebalancing Strategy</h4>
                            <p class="text-sm text-green-700">Rebalance annually or when allocation drifts 5-10% from target. Use new contributions to rebalance when possible to avoid tax consequences.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-green-600">Getting Started</h3>
                        <ol class="list-decimal list-inside space-y-2 text-gray-600">
                            <li>Max out 401(k) match (free money!)</li>
                            <li>Open IRA (Traditional or Roth)</li>
                            <li>Choose your allocation based on age and risk tolerance</li>
                            <li>Set up automatic investments</li>
                            <li>Review and rebalance annually</li>
                            <li>Stay the course through market volatility</li>
                        </ol>
                    `,
          },
          {
            id: "psychology",
            icon: "brain",
            title: "Psychology & Behavioral Finance",
            content: `
                        <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-xl mb-6 border border-purple-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Master Your Mind, Master Your Money</h3>
                            <p class="text-gray-600">The biggest barriers to FIRE success are often psychological. Understanding behavioral biases helps you make better financial decisions.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Common Behavioral Biases</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Loss Aversion</h4>
                                <p class="text-sm text-gray-600 mb-2">People feel losses twice as strongly as equivalent gains.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Solution:</strong> Focus on long-term gains, not short-term market volatility
                                </div>
                            </div>

                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">📈 Recency Bias</h4>
                                <p class="text-sm text-gray-600 mb-2">Overweighting recent events when making decisions.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Solution:</strong> Study long-term market history, not just recent years
                                </div>
                            </div>

                            <div class="border border-amber-200 rounded-lg p-4 bg-amber-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🧠 Analysis Paralysis</h4>
                                <p class="text-sm text-gray-600 mb-2">Overthinking investment decisions instead of taking action.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Solution:</strong> Start with simple index funds, optimize later
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Building the Right Mindset</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Growth Mindset</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• View setbacks as learning opportunities</li>
                                    <li>• Embrace continuous improvement</li>
                                    <li>• Focus on process, not just outcomes</li>
                                    <li>• Celebrate small wins</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">⚖️ Abundance Mentality</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Money is a tool, not a goal</li>
                                    <li>• Focus on value, not just cost</li>
                                    <li>• Invest in experiences and relationships</li>
                                    <li>• Give back to community</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Dealing with Market Volatility</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border-l-4 border-purple-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Dollar-Cost Averaging</h4>
                                <p class="text-sm text-gray-600 mt-1">Invest the same amount regularly regardless of market conditions. Reduces timing risk and emotional decisions.</p>
                            </div>
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Reframe Market Drops</h4>
                                <p class="text-sm text-gray-600 mt-1">View market downturns as "sales" - you're buying more shares for the same dollar amount.</p>
                            </div>
                            <div class="border-l-4 border-green-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Emergency Fund Peace of Mind</h4>
                                <p class="text-sm text-gray-600 mt-1">3-6 months of expenses in cash reduces anxiety about market volatility.</p>
                            </div>
                        </div>

                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
                            <h4 class="font-semibold text-purple-800 mb-2">👥 Common Social Pressures</h4>
                            <ul class="text-sm text-purple-700 space-y-1">
                                <li>• Lifestyle inflation pressure from peers</li>
                                <li>• Family criticism of "extreme" saving</li>
                                <li>• FOMO on expensive experiences</li>
                                <li>• Partner disagreements on spending</li>
                            </ul>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Automation & Systems</h3>
                        <p class="text-sm text-gray-600 mb-4">Remove emotion from financial decisions by automating good behaviors.</p>

                        <div class="space-y-3 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-3 shadow-sm">
                                <h4 class="font-medium text-gray-800 mb-1">🤖 Automate Investments</h4>
                                <p class="text-xs text-gray-600">Set up automatic transfers to investment accounts on payday</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-3 shadow-sm">
                                <h4 class="font-medium text-gray-800 mb-1">📊 Track Net Worth</h4>
                                <p class="text-xs text-gray-600">Monthly tracking keeps you motivated and on track</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-3 shadow-sm">
                                <h4 class="font-medium text-gray-800 mb-1">🎯 Use Specific Goals</h4>
                                <p class="text-xs text-gray-600">"Save $500,000 by age 40" vs "save more money"</p>
                            </div>
                        </div>

                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                            <h4 class="font-semibold text-purple-800 mb-2">💡 Remember Your Why</h4>
                            <p class="text-sm text-purple-700">FIRE isn't about deprivation - it's about freedom. Financial independence gives you the power to choose how you spend your time and energy.</p>
                        </div>
                    `,
          },
          {
            id: "psychology",
            icon: "brain",
            title: "Psychology & Behavioral Finance",
            content: `
                        <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-xl mb-6 border border-purple-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Master Your Mind, Master Your Money</h3>
                            <p class="text-gray-600">The biggest barriers to FIRE success are often psychological. Understanding behavioral biases helps you make better financial decisions.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Common Behavioral Biases</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Loss Aversion</h4>
                                <p class="text-sm text-gray-600 mb-2">People feel losses twice as strongly as equivalent gains.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Solution:</strong> Focus on long-term gains, not short-term market volatility
                                </div>
                            </div>

                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">📈 Recency Bias</h4>
                                <p class="text-sm text-gray-600 mb-2">Overweighting recent events when making decisions.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Solution:</strong> Study long-term market history, not just recent years
                                </div>
                            </div>

                            <div class="border border-amber-200 rounded-lg p-4 bg-amber-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🧠 Analysis Paralysis</h4>
                                <p class="text-sm text-gray-600 mb-2">Overthinking investment decisions instead of taking action.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Solution:</strong> Start with simple index funds, optimize later
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Building the Right Mindset</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Growth Mindset</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• View setbacks as learning opportunities</li>
                                    <li>• Embrace continuous improvement</li>
                                    <li>• Focus on process, not just outcomes</li>
                                    <li>• Celebrate small wins</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">⚖️ Abundance Mentality</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Money is a tool, not a goal</li>
                                    <li>• Focus on value, not just cost</li>
                                    <li>• Invest in experiences and relationships</li>
                                    <li>• Give back to community</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Dealing with Market Volatility</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border-l-4 border-purple-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Dollar-Cost Averaging</h4>
                                <p class="text-sm text-gray-600 mt-1">Invest the same amount regularly regardless of market conditions. Reduces timing risk and emotional decisions.</p>
                            </div>
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Reframe Market Drops</h4>
                                <p class="text-sm text-gray-600 mt-1">View market downturns as "sales" - you're buying more shares for the same dollar amount.</p>
                            </div>
                            <div class="border-l-4 border-green-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Emergency Fund Peace of Mind</h4>
                                <p class="text-sm text-gray-600 mt-1">3-6 months of expenses in cash reduces anxiety about market volatility.</p>
                            </div>
                        </div>

                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
                            <h4 class="font-semibold text-purple-800 mb-2">👥 Common Social Pressures</h4>
                            <ul class="text-sm text-purple-700 space-y-1">
                                <li>• Lifestyle inflation pressure from peers</li>
                                <li>• Family criticism of "extreme" saving</li>
                                <li>• FOMO on expensive experiences</li>
                                <li>• Partner disagreements on spending</li>
                            </ul>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Automation & Systems</h3>
                        <p class="text-sm text-gray-600 mb-4">Remove emotion from financial decisions by automating good behaviors.</p>

                        <div class="space-y-3 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-3 shadow-sm">
                                <h4 class="font-medium text-gray-800 mb-1">🤖 Automate Investments</h4>
                                <p class="text-xs text-gray-600">Set up automatic transfers to investment accounts on payday</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-3 shadow-sm">
                                <h4 class="font-medium text-gray-800 mb-1">📊 Track Net Worth</h4>
                                <p class="text-xs text-gray-600">Monthly tracking keeps you motivated and on track</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-3 shadow-sm">
                                <h4 class="font-medium text-gray-800 mb-1">🎯 Use Specific Goals</h4>
                                <p class="text-xs text-gray-600">"Save $500,000 by age 40" vs "save more money"</p>
                            </div>
                        </div>

                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                            <h4 class="font-semibold text-purple-800 mb-2">💡 Remember Your Why</h4>
                            <p class="text-sm text-purple-700">FIRE isn't about deprivation - it's about freedom. Financial independence gives you the power to choose how you spend your time and energy.</p>
                        </div>
                    `,
          },
          {
            id: "tax-strategies",
            icon: "receipt",
            title: "Tax-Advantaged Accounts & Strategies",
            content: `
                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-xl mb-6 border border-indigo-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Maximize Your Tax Efficiency</h3>
                            <p class="text-gray-600">Tax-advantaged accounts can accelerate your FIRE journey by reducing your tax burden and maximizing compound growth.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-indigo-600">The FIRE Tax Strategy Hierarchy</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-indigo-200 rounded-lg p-4 bg-indigo-50">
                                <h4 class="font-semibold text-gray-800 mb-2">1️⃣ Employer 401(k) Match</h4>
                                <p class="text-sm text-gray-600 mb-2">Free money! Always contribute enough to get the full employer match.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Typical match:</strong> 50% or 100% of contributions up to 3-6% of salary
                                </div>
                            </div>

                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-2">2️⃣ High-Yield Savings (Emergency Fund)</h4>
                                <p class="text-sm text-gray-600 mb-2">3-6 months of expenses in a high-yield savings account.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Current rates:</strong> 4-5% APY at online banks like Marcus, Ally, or Capital One
                                </div>
                            </div>

                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">3️⃣ IRA (Traditional vs Roth)</h4>
                                <p class="text-sm text-gray-600 mb-2">$7,000 annual limit (2024), or $8,000 if 50+</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Traditional:</strong> Tax deduction now, pay taxes in retirement<br>
                                    <strong>Roth:</strong> No deduction now, tax-free withdrawals in retirement
                                </div>
                            </div>

                            <div class="border border-amber-200 rounded-lg p-4 bg-amber-50">
                                <h4 class="font-semibold text-gray-800 mb-2">4️⃣ Max Out 401(k)</h4>
                                <p class="text-sm text-gray-600 mb-2">$23,000 annual limit (2024), or $30,500 if 50+</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Pro tip:</strong> If available, consider Roth 401(k) for tax diversification
                                </div>
                            </div>

                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">5️⃣ Taxable Brokerage</h4>
                                <p class="text-sm text-gray-600 mb-2">No contribution limits, but no tax advantages</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Essential for FIRE:</strong> Provides access to funds before age 59½
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-indigo-600">Advanced Strategies</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏥 HSA (Health Savings Account)</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Triple tax advantage</li>
                                    <li>• $4,300 individual / $8,550 family (2024)</li>
                                    <li>• Invest like an IRA after $2,000</li>
                                    <li>• Becomes IRA at age 65</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏢 Mega Backdoor Roth</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• After-tax 401(k) contributions</li>
                                    <li>• Up to $69,000 total annual limit</li>
                                    <li>• Requires employer plan support</li>
                                    <li>• Convert to Roth immediately</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-indigo-600">Early Retirement Access Strategies</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border-l-4 border-indigo-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Roth IRA Ladder</h4>
                                <p class="text-sm text-gray-600 mt-1">Convert Traditional IRA to Roth annually, wait 5 years, then access penalty-free.</p>
                            </div>
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h4 class="font-semibold text-gray-800">Rule of 55</h4>
                                <p class="text-sm text-gray-600 mt-1">Access 401(k) penalty-free if you leave your job at age 55 or later.</p>
                            </div>
                            <div class="border-l-4 border-green-500 pl-4">
                                <h4 class="font-semibold text-gray-800">SEPP (72t)</h4>
                                <p class="text-sm text-gray-600 mt-1">Substantially Equal Periodic Payments from retirement accounts before age 59½.</p>
                            </div>
                        </div>

                        <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                            <h4 class="font-semibold text-indigo-800 mb-2">💡 Key Takeaway</h4>
                            <p class="text-sm text-indigo-700">The order matters! Maximize tax-advantaged accounts first, then use taxable accounts for FIRE bridge years. Consider working with a tax professional for complex strategies.</p>
                        </div>
                    `,
          },
          {
            id: "stocks-guide",
            icon: "chart-line",
            title: "Understanding Stocks & Individual Securities",
            content: `
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl mb-6 border border-blue-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">What Are Stocks?</h3>
                            <p class="text-gray-600">Stocks represent ownership shares in a company. When you buy stock, you become a partial owner of that company and have a claim on its assets and earnings.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-blue-600">Types of Stocks</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📊 Common Stock</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Voting rights on company matters</li>
                                    <li>• Potential for dividends</li>
                                    <li>• Higher risk, higher potential reward</li>
                                    <li>• Most stocks are common stock</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏦 Preferred Stock</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Fixed dividend payments</li>
                                    <li>• Priority over common stock</li>
                                    <li>• Usually no voting rights</li>
                                    <li>• More stable, bond-like returns</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-blue-600">Key Stock Metrics</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">📈 Price-to-Earnings (P/E) Ratio</h4>
                                <p class="text-sm text-gray-600 mb-2">Measures how much investors are willing to pay per dollar of earnings.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Formula:</strong> Stock Price ÷ Earnings Per Share<br>
                                    <strong>Example:</strong> $100 stock price ÷ $5 EPS = 20 P/E ratio
                                </div>
                            </div>
                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-2">💰 Market Capitalization</h4>
                                <p class="text-sm text-gray-600 mb-2">Total value of all company shares outstanding.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Large Cap:</strong> $10B+<br>
                                    <strong>Mid Cap:</strong> $2B-$10B<br>
                                    <strong>Small Cap:</strong> $300M-$2B
                                </div>
                            </div>
                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">📊 Beta</h4>
                                <p class="text-sm text-gray-600 mb-2">Measures volatility compared to the overall market.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Beta = 1:</strong> Moves with market<br>
                                    <strong>Beta > 1:</strong> More volatile than market<br>
                                    <strong>Beta < 1:</strong> Less volatile than market
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-blue-600">Stock Analysis Methods</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🔍 Fundamental Analysis</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Company financial statements</li>
                                    <li>• Revenue and profit trends</li>
                                    <li>• Industry and economic factors</li>
                                    <li>• Management quality</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📉 Technical Analysis</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Price charts and patterns</li>
                                    <li>• Trading volume analysis</li>
                                    <li>• Moving averages and trends</li>
                                    <li>• Support and resistance levels</li>
                                </ul>
                            </div>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h4 class="font-semibold text-blue-800 mb-2">💡 Stock Investing Tips</h4>
                            <ul class="text-sm text-blue-700 space-y-1 list-disc list-inside">
                                <li>Diversify across different sectors and company sizes</li>
                                <li>Focus on companies with strong competitive advantages</li>
                                <li>Consider dividend-paying stocks for income</li>
                                <li>Don't try to time the market - use dollar-cost averaging</li>
                                <li>Research before investing - understand what you own</li>
                            </ul>
                        </div>
                    `,
          },
          {
            id: "etfs-guide",
            icon: "layer-group",
            title: "ETFs: Exchange-Traded Funds Explained",
            content: `
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl mb-6 border border-green-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">What Are ETFs?</h3>
                            <p class="text-gray-600">ETFs are investment funds that trade on stock exchanges like individual stocks. They typically track an index, commodity, bonds, or a basket of assets.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-green-600">Popular ETF Categories</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏛️ Broad Market ETFs</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• <strong>SPY:</strong> S&P 500 index</li>
                                    <li>• <strong>VTI:</strong> Total US stock market</li>
                                    <li>• <strong>QQQ:</strong> NASDAQ 100</li>
                                    <li>• <strong>VEA:</strong> Developed markets</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏢 Sector ETFs</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• <strong>XLK:</strong> Technology sector</li>
                                    <li>• <strong>XLF:</strong> Financial sector</li>
                                    <li>• <strong>XLE:</strong> Energy sector</li>
                                    <li>• <strong>XLV:</strong> Healthcare sector</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏦 Bond ETFs</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• <strong>BND:</strong> Total bond market</li>
                                    <li>• <strong>AGG:</strong> US aggregate bonds</li>
                                    <li>• <strong>TLT:</strong> Long-term treasury</li>
                                    <li>• <strong>HYG:</strong> High-yield bonds</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏗️ Specialty ETFs</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• <strong>VNQ:</strong> Real Estate (REITs)</li>
                                    <li>• <strong>GLD:</strong> Gold commodity</li>
                                    <li>• <strong>VWO:</strong> Emerging markets</li>
                                    <li>• <strong>ARKK:</strong> Innovation/Tech</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-green-600">ETF Advantages</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-2">📊 Instant Diversification</h4>
                                <p class="text-sm text-gray-600 mb-2">Own hundreds or thousands of stocks with a single purchase.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Example:</strong> VTI holds over 4,000 US stocks across all sectors and sizes
                                </div>
                            </div>
                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">💰 Low Costs</h4>
                                <p class="text-sm text-gray-600 mb-2">Lower expense ratios compared to mutual funds.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Typical Range:</strong> 0.03% - 0.75% annually<br>
                                    <strong>Example:</strong> 0.03% on $10,000 = $3/year in fees
                                </div>
                            </div>
                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">⚡ Liquidity & Flexibility</h4>
                                <p class="text-sm text-gray-600 mb-2">Trade during market hours like stocks.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Benefits:</strong> Real-time pricing, limit orders, stop losses
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-green-600">Building an ETF Portfolio</h3>
                        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
                            <h4 class="font-semibold text-gray-800 mb-3">🎯 Sample Conservative Portfolio</h4>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">US Total Market (VTI):</span>
                                    <span class="font-medium text-gray-800">60%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">International Developed (VEA):</span>
                                    <span class="font-medium text-gray-800">20%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Bonds (BND):</span>
                                    <span class="font-medium text-gray-800">15%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Real Estate (VNQ):</span>
                                    <span class="font-medium text-gray-800">5%</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h4 class="font-semibold text-green-800 mb-2">✅ ETF Best Practices</h4>
                            <ul class="text-sm text-green-700 space-y-1 list-disc list-inside">
                                <li>Start with broad market ETFs for core holdings</li>
                                <li>Check expense ratios - lower is usually better</li>
                                <li>Consider tax efficiency - ETFs are generally tax-friendly</li>
                                <li>Rebalance periodically to maintain target allocation</li>
                                <li>Avoid over-diversification - a few broad ETFs can be enough</li>
                            </ul>
                        </div>
                    `,
          },
          {
            id: "market-indices",
            icon: "chart-area",
            title: "Market Indices: Understanding the Benchmarks",
            content: `
                        <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-xl mb-6 border border-purple-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">What Are Market Indices?</h3>
                            <p class="text-gray-600">Market indices are statistical measures that track the performance of a specific group of stocks, representing a particular market segment or the overall market.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Major US Indices</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📊 S&P 500 (^GSPC)</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• 500 largest US companies</li>
                                    <li>• Market cap weighted</li>
                                    <li>• Covers ~80% of US stock market</li>
                                    <li>• Most popular benchmark</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏭 Dow Jones (^DJI)</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• 30 large blue-chip companies</li>
                                    <li>• Price-weighted index</li>
                                    <li>• Oldest US stock index (1896)</li>
                                    <li>• More narrow representation</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">💻 NASDAQ Composite (^IXIC)</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• All NASDAQ-listed stocks</li>
                                    <li>• Tech-heavy concentration</li>
                                    <li>• Over 3,000 companies</li>
                                    <li>• Growth-oriented benchmark</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏘️ Russell 2000 (^RUT)</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• 2,000 small-cap companies</li>
                                    <li>• $300M - $2B market cap</li>
                                    <li>• Small company performance</li>
                                    <li>• Higher volatility</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">International Indices</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🌍 MSCI World Index</h4>
                                <p class="text-sm text-gray-600 mb-2">Tracks large and mid-cap stocks across 23 developed countries.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Countries:</strong> US, UK, Japan, Germany, France, Canada, Australia, and more
                                </div>
                            </div>
                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🏯 Nikkei 225 (Japan)</h4>
                                <p class="text-sm text-gray-600 mb-2">225 large companies listed on Tokyo Stock Exchange.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Notable:</strong> Toyota, Sony, SoftBank, Nintendo
                                </div>
                            </div>
                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🇪🇺 Euro Stoxx 50</h4>
                                <p class="text-sm text-gray-600 mb-2">50 largest companies in the Eurozone.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Countries:</strong> Germany, France, Netherlands, Italy, Spain, Belgium
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Specialty Indices</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">😰 VIX - Volatility Index</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Measures market fear/volatility</li>
                                    <li>• Based on S&P 500 options</li>
                                    <li>• "Fear gauge" of the market</li>
                                    <li>• High VIX = High uncertainty</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏠 REIT Indices</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Real Estate Investment Trusts</li>
                                    <li>• Property-focused investments</li>
                                    <li>• Income-generating assets</li>
                                    <li>• Inflation hedge potential</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-purple-600">Index Weighting Methods</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">⚖️ Market Cap Weighted</h4>
                                <p class="text-sm text-gray-600 mb-2">Largest companies have the biggest impact on index performance.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Example:</strong> Apple's weight in S&P 500 is proportional to its market cap
                                </div>
                            </div>
                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">💰 Price Weighted</h4>
                                <p class="text-sm text-gray-600 mb-2">Companies with higher stock prices have more influence.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Example:</strong> Dow Jones - a $300 stock has 3x impact of a $100 stock
                                </div>
                            </div>
                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Equal Weighted</h4>
                                <p class="text-sm text-gray-600 mb-2">All companies have the same weight regardless of size.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Effect:</strong> Gives more influence to smaller companies
                                </div>
                            </div>
                        </div>

                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                            <h4 class="font-semibold text-purple-800 mb-2">📈 Why Indices Matter</h4>
                            <ul class="text-sm text-purple-700 space-y-1 list-disc list-inside">
                                <li>Benchmarks for measuring investment performance</li>
                                <li>Basis for index funds and ETFs</li>
                                <li>Economic indicators and market sentiment</li>
                                <li>Diversification tools for investors</li>
                                <li>Historical data for backtesting strategies</li>
                            </ul>
                        </div>
                    `,
          },
          {
            id: "market-terminology",
            icon: "book-open",
            title: "Market Terminology: Bull, Bear & Beyond",
            content: `
                        <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-xl mb-6 border border-yellow-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Essential Market Terms</h3>
                            <p class="text-gray-600">Understanding market terminology is crucial for making informed investment decisions and communicating with other investors.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-yellow-600">Market Trends & Sentiment</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🐂 Bull Market</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Rising prices over extended period</li>
                                    <li>• Investor confidence high</li>
                                    <li>• 20%+ gain from recent lows</li>
                                    <li>• Strong economic growth</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🐻 Bear Market</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Declining prices over extended period</li>
                                    <li>• Investor pessimism high</li>
                                    <li>• 20%+ decline from recent highs</li>
                                    <li>• Economic uncertainty</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🦘 Kangaroo Market</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Sideways movement</li>
                                    <li>• Frequent ups and downs</li>
                                    <li>• No clear trend direction</li>
                                    <li>• Range-bound trading</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📈 Correction</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• 10-20% decline from highs</li>
                                    <li>• Temporary pullback</li>
                                    <li>• Healthy market reset</li>
                                    <li>• Often buying opportunity</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-yellow-600">Trading & Investment Terms</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-yellow-200 rounded-lg p-4 bg-yellow-50">
                                <h4 class="font-semibold text-gray-800 mb-2">💹 Volatility</h4>
                                <p class="text-sm text-gray-600 mb-2">Measure of price fluctuation over time.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>High Vol:</strong> Large price swings<br>
                                    <strong>Low Vol:</strong> Stable price movements
                                </div>
                            </div>
                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">📊 Liquidity</h4>
                                <p class="text-sm text-gray-600 mb-2">How easily an asset can be bought or sold.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>High Liquidity:</strong> Easy to trade, tight spreads<br>
                                    <strong>Low Liquidity:</strong> Harder to trade, wide spreads
                                </div>
                            </div>
                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Bid-Ask Spread</h4>
                                <p class="text-sm text-gray-600 mb-2">Difference between buying and selling price.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Bid:</strong> Highest price buyers will pay<br>
                                    <strong>Ask:</strong> Lowest price sellers will accept
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-yellow-600">Behavioral Finance Terms</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">😱 FOMO</h4>
                                <p class="text-sm text-gray-600 mb-2">Fear of Missing Out</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    Rushing into investments due to fear of missing gains
                                </div>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">💎 Diamond Hands</h4>
                                <p class="text-sm text-gray-600 mb-2">Holding despite volatility</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    Not selling during market downturns
                                </div>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📜 Paper Hands</h4>
                                <p class="text-sm text-gray-600 mb-2">Selling too quickly</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    Selling at first sign of trouble
                                </div>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🚀 To The Moon</h4>
                                <p class="text-sm text-gray-600 mb-2">Expecting huge gains</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    Belief that price will skyrocket
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-yellow-600">Risk & Portfolio Terms</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-red-200 rounded-lg p-4 bg-red-50">
                                <h4 class="font-semibold text-gray-800 mb-2">⚠️ Risk Tolerance</h4>
                                <p class="text-sm text-gray-600 mb-2">How much risk you can handle emotionally and financially.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Conservative:</strong> Low risk, lower returns<br>
                                    <strong>Aggressive:</strong> High risk, higher potential returns
                                </div>
                            </div>
                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Asset Allocation</h4>
                                <p class="text-sm text-gray-600 mb-2">How you divide investments across different asset classes.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Example:</strong> 60% stocks, 30% bonds, 10% real estate
                                </div>
                            </div>
                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🔄 Rebalancing</h4>
                                <p class="text-sm text-gray-600 mb-2">Adjusting portfolio back to target allocation.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Why:</strong> Market movements change your allocation over time
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-yellow-600">Economic Indicators</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📈 GDP Growth</h4>
                                <p class="text-sm text-gray-600">Gross Domestic Product - measures economic output</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">💰 Inflation Rate</h4>
                                <p class="text-sm text-gray-600">Rate at which prices for goods and services rise</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏦 Interest Rates</h4>
                                <p class="text-sm text-gray-600">Federal Reserve's benchmark rates</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">👥 Employment Data</h4>
                                <p class="text-sm text-gray-600">Unemployment rate and job creation numbers</p>
                            </div>
                        </div>

                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h4 class="font-semibold text-yellow-800 mb-2">📚 Quick Reference</h4>
                            <div class="text-sm text-yellow-700 space-y-1">
                                <p><strong>DCA:</strong> Dollar-Cost Averaging - investing fixed amounts regularly</p>
                                <p><strong>HODL:</strong> Hold On for Dear Life - long-term holding strategy</p>
                                <p><strong>DD:</strong> Due Diligence - researching before investing</p>
                                <p><strong>YOLO:</strong> You Only Live Once - high-risk investment approach</p>
                                <p><strong>Bag Holder:</strong> Someone holding a losing investment</p>
                            </div>
                        </div>
                    `,
          },
          {
            id: "side-hustles",
            icon: "rocket",
            title: "Side Hustles & Income Optimization",
            content: `
                        <div class="bg-gradient-to-r from-emerald-50 to-teal-50 p-6 rounded-xl mb-6 border border-emerald-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Accelerate Your FIRE Journey</h3>
                            <p class="text-gray-600">Increasing your income is often more effective than cutting expenses. Side hustles can dramatically reduce your time to financial independence.</p>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-emerald-600">High-Impact Side Hustles</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">💻 Freelance Your Skills</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Writing, design, programming</li>
                                    <li>• Consulting in your expertise</li>
                                    <li>• $25-150+ per hour potential</li>
                                    <li>• Platforms: Upwork, Fiverr, Toptal</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">📚 Online Course Creation</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Teach what you know</li>
                                    <li>• Passive income potential</li>
                                    <li>• $1,000-50,000+ per course</li>
                                    <li>• Platforms: Udemy, Teachable, Thinkific</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🏠 Real Estate</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Rental property investment</li>
                                    <li>• House hacking (live in one unit)</li>
                                    <li>• REITs for passive exposure</li>
                                    <li>• 10-15% annual returns possible</li>
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                                <h4 class="font-semibold text-gray-800 mb-2">🛍️ E-commerce Business</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Amazon FBA, Shopify store</li>
                                    <li>• Dropshipping (low startup cost)</li>
                                    <li>• Print on demand products</li>
                                    <li>• Scalable with systems</li>
                                </ul>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-emerald-600">Income Optimization at Your Day Job</h3>
                        <div class="space-y-4 mb-6">
                            <div class="border border-emerald-200 rounded-lg p-4 bg-emerald-50">
                                <h4 class="font-semibold text-gray-800 mb-2">💰 Negotiate Your Salary</h4>
                                <p class="text-sm text-gray-600 mb-2">Research market rates and build a case for increase.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Strategy:</strong> Document achievements, show value added, timing matters
                                </div>
                            </div>

                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🎯 Focus on High-Value Skills</h4>
                                <p class="text-sm text-gray-600 mb-2">Invest in skills that directly impact company revenue.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Examples:</strong> Data analysis, sales, programming, project management
                                </div>
                            </div>

                            <div class="border border-purple-200 rounded-lg p-4 bg-purple-50">
                                <h4 class="font-semibold text-gray-800 mb-2">🏆 Side Projects at Work</h4>
                                <p class="text-sm text-gray-600 mb-2">Volunteer for high-visibility projects that showcase your impact.</p>
                                <div class="text-xs text-gray-600 bg-white p-2 rounded border">
                                    <strong>Result:</strong> Faster promotions, better reviews, networking opportunities
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold mt-6 mb-4 text-emerald-600">The FIRE Income Formula</h3>
                        <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm">
                            <h4 class="font-semibold text-gray-800 mb-3">📊 Calculate Your Income Impact</h4>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Extra $500/month side income:</span>
                                    <span class="font-medium text-gray-800">$6,000/year</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Invested at 7% for 10 years:</span>
                                    <span class="font-medium text-emerald-600">$82,844</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Time saved to FIRE:</span>
                                    <span class="font-medium text-emerald-600">2-4 years</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                            <h4 class="font-semibold text-emerald-800 mb-2">🚀 Action Steps</h4>
                            <ol class="text-sm text-emerald-700 space-y-1 list-decimal list-inside">
                                <li>Audit your current skills and time</li>
                                <li>Choose one side hustle to start this month</li>
                                <li>Set a realistic income goal ($500-2000/month)</li>
                                <li>Automate all side income directly to investments</li>
                                <li>Track your progress and scale what works</li>
                            </ol>
                        </div>
                    `,
          },
        ]

        const ArticleCard = ({ article, onClick }) => {
          return React.createElement(
            "div",
            {
              className: "card p-4 flex items-center gap-4 cursor-pointer hover:shadow-lg transition-all duration-300",
              onClick: () => onClick(article),
            },
            React.createElement(
              "div",
              { className: "p-3 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0" },
              React.createElement("i", { className: `fas fa-${article.icon} text-2xl text-blue-600` }),
            ),
            React.createElement(
              "div",
              null,
              React.createElement("h3", { className: "font-bold text-lg text-gray-800" }, article.title),
              React.createElement("p", { className: "text-gray-600 text-sm mt-1" }, "Click to read more →"),
            ),
          )
        }

        const Modal = ({ isOpen, onClose, children }) => {
          if (!isOpen) return null

          return React.createElement(
            "div",
            {
              className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",
              onClick: onClose,
            },
            React.createElement(
              "div",
              {
                className: "bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",
                onClick: (e) => e.stopPropagation(),
              },
              React.createElement(
                "div",
                { className: "sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center" },
                React.createElement(
                  "h2",
                  { className: "text-xl font-bold text-gray-800" },
                  children?.props?.title || "Guide",
                ),
                React.createElement(
                  "button",
                  {
                    onClick: onClose,
                    className: "text-gray-500 hover:text-gray-700 text-2xl font-bold",
                  },
                  "×",
                ),
              ),
              React.createElement("div", { className: "p-6" }, children),
            ),
          )
        }

        const ArticleContent = ({ title, content }) => {
          return React.createElement("div", {
            className: "prose prose-gray max-w-none",
            dangerouslySetInnerHTML: { __html: content },
          })
        }

        return React.createElement(
          "div",
          { className: "fade-in" },
          React.createElement(
            "div",
            { className: "mb-6" },
            React.createElement(
              "h2",
              { className: "text-2xl font-bold text-gray-800 mb-3" },
              "Financial Independence Guides",
            ),
            React.createElement(
              "p",
              { className: "text-gray-600" },
              "Comprehensive guides to help you master financial independence. Click on any guide to learn more.",
            ),
          ),
          React.createElement(
            "div",
            { className: "grid grid-cols-1 md:grid-cols-2 gap-4 mb-6" },
            ...articles.map((article) =>
              React.createElement(ArticleCard, {
                key: article.id,
                article,
                onClick: setSelectedArticle,
              }),
            ),
          ),
          React.createElement(
            Modal,
            {
              isOpen: !!selectedArticle,
              onClose: () => setSelectedArticle(null),
            },
            selectedArticle &&
              React.createElement(ArticleContent, {
                title: selectedArticle.title,
                content: selectedArticle.content,
              }),
          ),
        )
      }

      function MarketData() {
        const [marketData, setMarketData] = useState(() => loadCachedMarketData())
        const [selectedCategory, setSelectedCategory] = useState("popular")
        const [isLoading, setIsLoading] = useState(false)
        const [lastUpdated, setLastUpdated] = useState(null)
        const [isAutoRefresh, setIsAutoRefresh] = useState(false)
        const [refreshCount, setRefreshCount] = useState(0)
        const [customSymbols, setCustomSymbols] = useState([])
        const [searchQuery, setSearchQuery] = useState("")
        const [searchResults, setSearchResults] = useState([])
        const [showSearchResults, setShowSearchResults] = useState(false)
        const intervalRef = useRef(null)

        // Auto-refresh when component is active
        useEffect(() => {
          const loadMarketData = async (forceRefresh = false) => {
            if (!forceRefresh) setIsLoading(true)
            try {
              const symbols = getSymbolsForCategory(selectedCategory)
              const data = await fetchMarketData(symbols, forceRefresh)
              setMarketData(data)
              setLastUpdated(new Date())
              setRefreshCount((prev) => prev + 1)
            } catch (error) {
              console.error("Failed to load market data:", error)
            }
            if (!forceRefresh) setIsLoading(false)
          }

          // Initial load
          loadMarketData()

          // Set up auto-refresh interval
          if (isAutoRefresh) {
            intervalRef.current = setInterval(() => {
              loadMarketData(true)
            }, 60000) // 1 minute updates
          }

          return () => {
            if (intervalRef.current) {
              clearInterval(intervalRef.current)
            }
          }
        }, [isAutoRefresh, selectedCategory, customSymbols])

        // Enhanced search functionality with comprehensive symbol database
        useEffect(() => {
          const performSearch = async () => {
            if (searchQuery.length >= 1) {
              try {
                // Comprehensive symbol database that Tiingo supports
                const symbolDatabase = [
                  // Popular Stocks
                  { symbol: 'AAPL', name: 'Apple Inc.', type: 'stock' },
                  { symbol: 'MSFT', name: 'Microsoft Corporation', type: 'stock' },
                  { symbol: 'GOOGL', name: 'Alphabet Inc. Class A', type: 'stock' },
                  { symbol: 'GOOG', name: 'Alphabet Inc. Class C', type: 'stock' },
                  { symbol: 'AMZN', name: 'Amazon.com Inc.', type: 'stock' },
                  { symbol: 'TSLA', name: 'Tesla Inc.', type: 'stock' },
                  { symbol: 'NVDA', name: 'NVIDIA Corporation', type: 'stock' },
                  { symbol: 'META', name: 'Meta Platforms Inc.', type: 'stock' },
                  { symbol: 'NFLX', name: 'Netflix Inc.', type: 'stock' },
                  { symbol: 'CRM', name: 'Salesforce Inc.', type: 'stock' },
                  { symbol: 'ADBE', name: 'Adobe Inc.', type: 'stock' },
                  { symbol: 'PYPL', name: 'PayPal Holdings Inc.', type: 'stock' },
                  { symbol: 'UBER', name: 'Uber Technologies Inc.', type: 'stock' },
                  { symbol: 'SPOT', name: 'Spotify Technology S.A.', type: 'stock' },
                  { symbol: 'ZOOM', name: 'Zoom Video Communications Inc.', type: 'stock' },
                  { symbol: 'SNOW', name: 'Snowflake Inc.', type: 'stock' },

                  // Traditional Stocks
                  { symbol: 'BRK-A', name: 'Berkshire Hathaway Inc. Class A', type: 'stock' },
                  { symbol: 'BRK-B', name: 'Berkshire Hathaway Inc. Class B', type: 'stock' },
                  { symbol: 'JPM', name: 'JPMorgan Chase & Co.', type: 'stock' },
                  { symbol: 'JNJ', name: 'Johnson & Johnson', type: 'stock' },
                  { symbol: 'WMT', name: 'Walmart Inc.', type: 'stock' },
                  { symbol: 'PG', name: 'Procter & Gamble Co.', type: 'stock' },
                  { symbol: 'UNH', name: 'UnitedHealth Group Inc.', type: 'stock' },
                  { symbol: 'HD', name: 'Home Depot Inc.', type: 'stock' },
                  { symbol: 'BAC', name: 'Bank of America Corp.', type: 'stock' },
                  { symbol: 'DIS', name: 'Walt Disney Co.', type: 'stock' },

                  // Major ETFs
                  { symbol: 'SPY', name: 'SPDR S&P 500 ETF Trust', type: 'etf' },
                  { symbol: 'QQQ', name: 'Invesco QQQ Trust ETF', type: 'etf' },
                  { symbol: 'VTI', name: 'Vanguard Total Stock Market ETF', type: 'etf' },
                  { symbol: 'IVV', name: 'iShares Core S&P 500 ETF', type: 'etf' },
                  { symbol: 'VOO', name: 'Vanguard S&P 500 ETF', type: 'etf' },
                  { symbol: 'VEA', name: 'Vanguard FTSE Developed Markets ETF', type: 'etf' },
                  { symbol: 'VWO', name: 'Vanguard FTSE Emerging Markets ETF', type: 'etf' },
                  { symbol: 'BND', name: 'Vanguard Total Bond Market ETF', type: 'etf' },
                  { symbol: 'VNQ', name: 'Vanguard Real Estate ETF', type: 'etf' },
                  { symbol: 'GLD', name: 'SPDR Gold Trust', type: 'etf' },
                  { symbol: 'TLT', name: 'iShares 20+ Year Treasury Bond ETF', type: 'etf' },
                  { symbol: 'GOVT', name: 'iShares U.S. Treasury Bond ETF', type: 'etf' },

                  // Sector ETFs
                  { symbol: 'XLK', name: 'Technology Select Sector SPDR Fund', type: 'etf' },
                  { symbol: 'XLF', name: 'Financial Select Sector SPDR Fund', type: 'etf' },
                  { symbol: 'XLV', name: 'Health Care Select Sector SPDR Fund', type: 'etf' },
                  { symbol: 'XLE', name: 'Energy Select Sector SPDR Fund', type: 'etf' },
                  { symbol: 'XLI', name: 'Industrial Select Sector SPDR Fund', type: 'etf' },
                  { symbol: 'XLY', name: 'Consumer Discretionary Select Sector SPDR Fund', type: 'etf' },
                  { symbol: 'XLP', name: 'Consumer Staples Select Sector SPDR Fund', type: 'etf' },
                  { symbol: 'XLRE', name: 'Real Estate Select Sector SPDR Fund', type: 'etf' },

                  // International ETFs
                  { symbol: 'IEFA', name: 'iShares Core MSCI EAFE IMI Index ETF', type: 'etf' },
                  { symbol: 'IEMG', name: 'iShares Core MSCI Emerging Markets IMI Index ETF', type: 'etf' },
                  { symbol: 'EFA', name: 'iShares MSCI EAFE ETF', type: 'etf' },
                  { symbol: 'EWJ', name: 'iShares MSCI Japan ETF', type: 'etf' },
                  { symbol: 'EWZ', name: 'iShares MSCI Brazil ETF', type: 'etf' },
                  { symbol: 'FXI', name: 'iShares China Large-Cap ETF', type: 'etf' },

                  // Market Indices
                  { symbol: '^GSPC', name: 'S&P 500 Index', type: 'index' },
                  { symbol: '^DJI', name: 'Dow Jones Industrial Average', type: 'index' },
                  { symbol: '^IXIC', name: 'NASDAQ Composite Index', type: 'index' },
                  { symbol: '^RUT', name: 'Russell 2000 Index', type: 'index' },
                  { symbol: '^VIX', name: 'CBOE Volatility Index', type: 'index' },

                  // Popular Mutual Funds (Tiingo supports many)
                  { symbol: 'VTSAX', name: 'Vanguard Total Stock Market Index Fund Admiral Shares', type: 'mutual_fund' },
                  { symbol: 'VTIAX', name: 'Vanguard Total International Stock Index Fund Admiral Shares', type: 'mutual_fund' },
                  { symbol: 'VBTLX', name: 'Vanguard Total Bond Market Index Fund Admiral Shares', type: 'mutual_fund' },
                  { symbol: 'FXNAX', name: 'Fidelity U.S. Bond Index Fund', type: 'mutual_fund' },
                  { symbol: 'FZROX', name: 'Fidelity ZERO Total Market Index Fund', type: 'mutual_fund' },
                  { symbol: 'FZILX', name: 'Fidelity ZERO International Index Fund', type: 'mutual_fund' }
                ]

                const filtered = symbolDatabase.filter(item =>
                  item.symbol.toLowerCase().includes(searchQuery.toLowerCase()) ||
                  item.name.toLowerCase().includes(searchQuery.toLowerCase())
                ).slice(0, 12)

                setSearchResults(filtered)
                setShowSearchResults(true)
              } catch (error) {
                console.error('Search error:', error)
                setSearchResults([])
              }
            } else {
              setShowSearchResults(false)
            }
          }

          const timeoutId = setTimeout(performSearch, 300)
          return () => clearTimeout(timeoutId)
        }, [searchQuery])

        const categories = [
          {
            id: "popular",
            label: "Popular Stocks",
            icon: "star",
            tooltip: "Most traded stocks like FAANG+ companies",
          },
          {
            id: "indices",
            label: "Market Indices",
            icon: "chart-line",
            tooltip: "Major market indices and VIX",
          },
          {
            id: "etfs",
            label: "ETFs & Funds",
            icon: "layer-group",
            tooltip: "Exchange-traded funds and mutual funds",
          },
          {
            id: "sectors",
            label: "Sector ETFs",
            icon: "building",
            tooltip: "Sector-specific ETFs",
          },
          {
            id: "international",
            label: "International",
            icon: "globe",
            tooltip: "International and emerging market funds",
          },
          {
            id: "custom",
            label: "Custom",
            icon: "search",
            tooltip: "Search and track your own symbols",
          },
        ]

        const getSymbolsForCategory = (category) => {
          switch (category) {
            case "popular":
              return ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX']
            case "indices":
              return ['^GSPC', '^DJI', '^IXIC', '^RUT', '^VIX']
            case "etfs":
              return ['SPY', 'VTI', 'QQQ', 'BND', 'VNQ', 'GLD', 'TLT', 'IVV']
            case "sectors":
              return ['XLK', 'XLF', 'XLV', 'XLE', 'XLI', 'XLY', 'XLP', 'XLRE']
            case "international":
              return ['VEA', 'VWO', 'IEFA', 'IEMG', 'EFA', 'EWJ', 'EWZ', 'FXI']
            case "custom":
              return customSymbols
            default:
              return []
          }
        }

        const handleAddCustomSymbol = (symbol) => {
          if (!customSymbols.includes(symbol) && symbol.trim()) {
            setCustomSymbols(prev => [...prev, symbol.toUpperCase()])
          }
          setSearchQuery("")
          setShowSearchResults(false)
        }

        const handleRemoveCustomSymbol = (symbol) => {
          setCustomSymbols(prev => prev.filter(s => s !== symbol))
        }

        const StockCard = ({ symbol, data }) => {
          if (!data) {
            return React.createElement(
              "div",
              { className: "bg-white rounded-lg shadow-md p-4 border border-gray-200" },
              React.createElement(
                "div",
                { className: "animate-pulse" },
                React.createElement("div", { className: "h-4 bg-gray-300 rounded w-1/2 mb-2" }),
                React.createElement("div", { className: "h-6 bg-gray-300 rounded w-3/4 mb-2" }),
                React.createElement("div", { className: "h-4 bg-gray-300 rounded w-1/3" })
              )
            )
          }

          const isPositive = parseFloat(data.change) >= 0
          const changeClass = isPositive ? "text-green-600" : "text-red-600"
          const bgClass = isPositive ? "bg-green-50 border-green-200" : "bg-red-50 border-red-200"

          // Format large numbers
          const formatLargeNumber = (num) => {
            if (num >= 1e9) return (num / 1e9).toFixed(1) + 'B'
            if (num >= 1e6) return (num / 1e6).toFixed(1) + 'M'
            if (num >= 1e3) return (num / 1e3).toFixed(1) + 'K'
            return num.toString()
          }

          return React.createElement(
            "div",
            {
              className: `bg-white rounded-lg shadow-md p-4 border-2 hover:shadow-lg transition-all duration-200 ${bgClass}`,
              style: { minHeight: '200px' }
            },
            // Header with symbol and price
            React.createElement(
              "div",
              { className: "flex justify-between items-start mb-3" },
              React.createElement(
                "div",
                null,
                React.createElement(
                  "div",
                  { className: "flex items-center gap-2 mb-1" },
                  React.createElement("h3", { className: "font-bold text-lg text-gray-800" }, symbol),
                  data.assetType && React.createElement(
                    "span",
                    { className: "text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded font-medium" },
                    data.assetType.replace('_', ' ').toUpperCase()
                  )
                ),
                React.createElement("p", { className: "text-sm text-gray-600 truncate max-w-48" }, data.name),
                data.exchangeCode && React.createElement(
                  "span",
                  { className: "text-xs text-gray-400" },
                  data.exchangeCode
                )
              ),
              React.createElement(
                "div",
                { className: "text-right" },
                React.createElement("div", { className: "font-bold text-xl text-gray-800" }, `$${data.price}`),
                React.createElement(
                  "div",
                  { className: `text-sm font-medium ${changeClass}` },
                  `${isPositive ? "+" : ""}${data.change} (${isPositive ? "+" : ""}${data.changePercent}%)`
                )
              )
            ),

            // Mini chart if price history is available
            data.priceHistory && data.priceHistory.length > 1 && React.createElement(
              "div",
              { className: "mb-3 h-12" },
              React.createElement(MiniChart, { data: data.priceHistory, isPositive })
            ),

            // OHLC and Volume data in grid
            React.createElement(
              "div",
              { className: "grid grid-cols-2 gap-2 text-xs text-gray-600 mb-3" },
              React.createElement(
                "div",
                { className: "flex justify-between" },
                React.createElement("span", { className: "text-gray-500" }, "Open:"),
                React.createElement("span", { className: "font-medium" }, `$${data.open}`)
              ),
              React.createElement(
                "div",
                { className: "flex justify-between" },
                React.createElement("span", { className: "text-gray-500" }, "High:"),
                React.createElement("span", { className: "font-medium text-green-600" }, `$${data.high}`)
              ),
              React.createElement(
                "div",
                { className: "flex justify-between" },
                React.createElement("span", { className: "text-gray-500" }, "Low:"),
                React.createElement("span", { className: "font-medium text-red-600" }, `$${data.low}`)
              ),
              data.volume > 0 && React.createElement(
                "div",
                { className: "flex justify-between" },
                React.createElement("span", { className: "text-gray-500" }, "Volume:"),
                React.createElement("span", { className: "font-medium" }, formatLargeNumber(data.volume))
              )
            ),

            // Corporate actions and additional info
            (data.divCash > 0 || data.splitFactor !== 1) && React.createElement(
              "div",
              { className: "mb-3 p-2 bg-blue-50 rounded text-xs" },
              data.divCash > 0 && React.createElement(
                "div",
                { className: "text-blue-700" },
                `💰 Dividend: $${data.divCash.toFixed(4)}`
              ),
              data.splitFactor !== 1 && React.createElement(
                "div",
                { className: "text-blue-700" },
                `📊 Split Factor: ${data.splitFactor}`
              )
            ),

            // Footer with metadata
            React.createElement(
              "div",
              { className: "mt-auto pt-3 border-t border-gray-100" },
              React.createElement(
                "div",
                { className: "flex justify-between items-center text-xs text-gray-400" },
                React.createElement(
                  "span",
                  null,
                  data.date && `Updated: ${new Date(data.date).toLocaleDateString()}`
                ),
                React.createElement("span", null, `Via ${data.dataSource || 'Tiingo'}`)
              ),
              data.description && React.createElement(
                "p",
                { className: "text-xs text-gray-500 mt-1 truncate" },
                data.description
              )
            )
          )
        }

        const MiniChart = ({ data, isPositive }) => {
          const chartRef = useRef(null)
          const chartInstance = useRef(null)

          useEffect(() => {
            if (chartRef.current && data && data.length > 1 && window.echarts) {
              if (chartInstance.current) {
                chartInstance.current.dispose()
              }

              chartInstance.current = window.echarts.init(chartRef.current)

              const option = {
                backgroundColor: 'transparent',
                grid: { left: 0, right: 0, top: 5, bottom: 5 },
                xAxis: {
                  type: 'category',
                  show: false,
                  data: data.map((_, i) => i)
                },
                yAxis: {
                  type: 'value',
                  show: false,
                  scale: true
                },
                series: [{
                  type: 'line',
                  data: data,
                  smooth: true,
                  symbol: 'none',
                  lineStyle: {
                    width: 2,
                    color: isPositive ? '#10b981' : '#ef4444'
                  },
                  areaStyle: {
                    color: {
                      type: 'linear',
                      x: 0, y: 0, x2: 0, y2: 1,
                      colorStops: [{
                        offset: 0,
                        color: isPositive ? 'rgba(16, 185, 129, 0.3)' : 'rgba(239, 68, 68, 0.3)'
                      }, {
                        offset: 1,
                        color: isPositive ? 'rgba(16, 185, 129, 0.05)' : 'rgba(239, 68, 68, 0.05)'
                      }]
                    }
                  },
                  animation: false
                }]
              }

              chartInstance.current.setOption(option)
            }

            return () => {
              if (chartInstance.current) {
                chartInstance.current.dispose()
              }
            }
          }, [data, isPositive])

          return React.createElement("div", {
            ref: chartRef,
            style: { width: "100%", height: "50px" }
          })
        }

        const MarketOverview = () => {
          const majorIndices = ['^GSPC', '^DJI', '^IXIC', '^RUT']
          const overviewData = majorIndices
            .map(symbol => ({
              symbol,
              name: symbol === '^GSPC' ? 'S&P 500' :
                    symbol === '^DJI' ? 'Dow Jones' :
                    symbol === '^IXIC' ? 'NASDAQ' : 'Russell 2000',
              data: marketData[symbol]
            }))
            .filter(item => item.data)

          if (overviewData.length === 0) return null

          return React.createElement(
            "div",
            { className: "bg-white rounded-lg shadow-md p-6 mb-6" },
            React.createElement(
              "h3",
              { className: "text-lg font-semibold mb-4 flex items-center gap-2" },
              React.createElement("i", { className: "fas fa-chart-area text-blue-600" }),
              "Market Overview",
              React.createElement(
                "span",
                { className: `ml-auto px-3 py-1 text-xs rounded-full ${isAutoRefresh ? "bg-green-100 text-green-800" : "bg-gray-100 text-gray-600"}` },
                isAutoRefresh ? "🔴 LIVE" : "MANUAL"
              )
            ),
            React.createElement(
              "div",
              { className: "grid grid-cols-2 md:grid-cols-4 gap-4" },
              ...overviewData.map(item => {
                const isPositive = parseFloat(item.data.change) >= 0
                const changeClass = isPositive ? "text-green-600" : "text-red-600"

                return React.createElement(
                  "div",
                  { key: item.symbol, className: "text-center p-3 bg-gray-50 rounded" },
                  React.createElement("div", { className: "font-medium text-gray-800 text-sm mb-1" }, item.name),
                  React.createElement("div", { className: "font-bold text-lg" }, `$${item.data.price}`),
                  React.createElement(
                    "div",
                    { className: `text-xs ${changeClass}` },
                    `${isPositive ? "+" : ""}${item.data.changePercent}%`
                  )
                )
              })
            ),
            React.createElement(
              "div",
              { className: "flex justify-between items-center mt-4 text-xs text-gray-500" },
              React.createElement("span", null, lastUpdated ? `Updated: ${lastUpdated.toLocaleTimeString()}` : "Loading..."),
              React.createElement("span", null, `${refreshCount} updates`)
            )
          )
        }

        const LoadingGrid = ({ count = 8 }) => {
          return React.createElement(
            "div",
            { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4" },
            ...Array(count).fill().map((_, i) =>
              React.createElement(StockCard, { key: i, symbol: "loading", data: null })
            )
          )
        }

        return React.createElement(
          "div",
          { className: "fade-in space-y-6" },
          React.createElement(MarketOverview),
          React.createElement(
            "div",
            { className: "bg-white rounded-lg shadow-md p-6" },
            React.createElement(
              "div",
              { className: "flex justify-between items-center mb-6" },
              React.createElement(
                "h3",
                { className: "text-lg font-semibold flex items-center gap-2" },
                React.createElement("i", { className: "fas fa-chart-line text-blue-600" }),
                "Market Data"
              ),
              React.createElement(
                "div",
                { className: "flex items-center gap-2" },
                React.createElement(
                  "button",
                  {
                    onClick: () => setIsAutoRefresh(!isAutoRefresh),
                    className: `px-3 py-1 text-sm rounded transition-colors ${isAutoRefresh
                      ? "bg-red-500 text-white hover:bg-red-600"
                      : "bg-green-500 text-white hover:bg-green-600"}`,
                  },
                  React.createElement("i", { className: `fas fa-${isAutoRefresh ? "pause" : "play"} mr-1` }),
                  isAutoRefresh ? "Pause" : "Auto-refresh"
                ),
                React.createElement(
                  "button",
                  {
                    onClick: async () => {
                      setIsLoading(true)
                      try {
                        const symbols = getSymbolsForCategory(selectedCategory)
                        const data = await fetchMarketData(symbols, true)
                        setMarketData(data)
                        setLastUpdated(new Date())
                        setRefreshCount(prev => prev + 1)
                      } catch (error) {
                        console.error("Refresh failed:", error)
                      }
                      setIsLoading(false)
                    },
                    className: "px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",
                    disabled: isLoading,
                  },
                  React.createElement("i", { className: `fas fa-sync-alt mr-1 ${isLoading ? "animate-spin" : ""}` }),
                  "Refresh"
                )
              )
            ),
            React.createElement(
              "div",
              { className: "flex flex-wrap gap-2 mb-6" },
              ...categories.map(category =>
                React.createElement(
                  "button",
                  {
                    key: category.id,
                    className: `px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                      selectedCategory === category.id
                        ? "bg-blue-500 text-white"
                        : "bg-gray-100 text-gray-700 hover:bg-gray-200"
                    }`,
                    onClick: () => setSelectedCategory(category.id),
                    title: category.tooltip,
                  },
                  React.createElement("i", { className: `fas fa-${category.icon} mr-2` }),
                  category.label
                )
              )
            ),
            selectedCategory === "custom" && React.createElement(
              "div",
              { className: "mb-6" },
              React.createElement(
                "div",
                { className: "relative" },
                React.createElement("input", {
                  type: "text",
                  placeholder: "Search stocks by symbol or name...",
                  value: searchQuery,
                  onChange: (e) => setSearchQuery(e.target.value),
                  className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                }),
                showSearchResults && searchResults.length > 0 && React.createElement(
                  "div",
                  { className: "absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg z-10 mt-1 max-h-80 overflow-y-auto" },
                  ...searchResults.map(item =>
                    React.createElement(
                      "div",
                      {
                        key: item.symbol,
                        className: "px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",
                        onClick: () => handleAddCustomSymbol(item.symbol),
                      },
                      React.createElement(
                        "div",
                        { className: "flex justify-between items-center" },
                        React.createElement(
                          "div",
                          { className: "flex-1" },
                          React.createElement(
                            "div",
                            { className: "flex items-center gap-2" },
                            React.createElement("div", { className: "font-bold text-gray-800" }, item.symbol),
                            React.createElement(
                              "span",
                              {
                                className: `text-xs px-2 py-1 rounded font-medium ${
                                  item.type === 'stock' ? 'bg-blue-100 text-blue-700' :
                                  item.type === 'etf' ? 'bg-green-100 text-green-700' :
                                  item.type === 'index' ? 'bg-purple-100 text-purple-700' :
                                  'bg-orange-100 text-orange-700'
                                }`
                              },
                              item.type?.replace('_', ' ').toUpperCase() || 'UNKNOWN'
                            )
                          ),
                          React.createElement("div", { className: "text-sm text-gray-600 mt-1 truncate" }, item.name)
                        ),
                        React.createElement("i", { className: "fas fa-plus text-blue-500 ml-2" })
                      )
                    )
                  )
                )
              ),
              customSymbols.length > 0 && React.createElement(
                "div",
                { className: "mt-3 flex flex-wrap gap-2" },
                ...customSymbols.map(symbol =>
                  React.createElement(
                    "div",
                    {
                      key: symbol,
                      className: "flex items-center gap-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",
                    },
                    React.createElement("span", null, symbol),
                    React.createElement(
                      "button",
                      {
                        onClick: () => handleRemoveCustomSymbol(symbol),
                        className: "text-blue-600 hover:text-blue-800 font-bold",
                      },
                      "×"
                    )
                  )
                )
              )
            ),
            // API Status and Controls Header
            React.createElement(
              "div",
              { className: "bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4" },
              React.createElement(
                "div",
                { className: "flex justify-between items-center" },
                React.createElement(
                  "div",
                  { className: "flex items-center gap-4" },
                  React.createElement(
                    "div",
                    { className: "flex items-center gap-2" },
                    React.createElement("i", {
                      className: `fas ${hasTiingoAPIKey() ? 'fa-check-circle text-green-500' : 'fa-exclamation-circle text-red-500'}`
                    }),
                    React.createElement(
                      "span",
                      { className: "text-sm font-medium" },
                      hasTiingoAPIKey() ? "Tiingo API Connected" : "Tiingo API Key Required"
                    )
                  ),
                  lastUpdated && React.createElement(
                    "div",
                    { className: "text-xs text-gray-500" },
                    `Last updated: ${lastUpdated.toLocaleTimeString()}`
                  )
                ),
                React.createElement(
                  "div",
                  { className: "flex items-center gap-2" },
                  React.createElement(
                    "label",
                    { className: "flex items-center gap-2 text-sm" },
                    React.createElement("input", {
                      type: "checkbox",
                      checked: isAutoRefresh,
                      onChange: (e) => setIsAutoRefresh(e.target.checked),
                      className: "rounded"
                    }),
                    "Auto-refresh"
                  ),
                  React.createElement(
                    "button",
                    {
                      onClick: () => {
                        const symbols = getSymbolsForCategory(selectedCategory)
                        fetchMarketData(symbols, true)
                      },
                      className: "px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",
                      disabled: isLoading
                    },
                    isLoading ? "Updating..." : "Refresh"
                  )
                )
              )
            ),
            isLoading && refreshCount === 0
              ? React.createElement(LoadingGrid)
              : React.createElement(
                  "div",
                  { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4" },
                  ...getSymbolsForCategory(selectedCategory).map(symbol =>
                    React.createElement(StockCard, {
                      key: symbol,
                      symbol,
                      data: marketData[symbol],
                    })
                  )
                ),
            React.createElement(
              "div",
              { className: "mt-6 text-center text-xs text-gray-500" },
              hasTiingoAPIKey()
                ? "Data provided by Tiingo API • Real-time market data • Updates every minute when auto-refresh is enabled"
                : "Configure your Tiingo API key in Settings to get real-time market data"
            )
          )
        )
      }

      function Settings() {
        const { config, resetConfig } = useConfig()
        const [showConfirm, setShowConfirm] = useState(false)
        const [apiKeyVisible, setApiKeyVisible] = useState(false)
        const [tiingoKey, setTiingoKey] = useState(API_CONFIG.TIINGO_KEY)

        const handleReset = () => {
          if (showConfirm) {
            resetConfig()
            setShowConfirm(false)
          } else {
            setShowConfirm(true)
          }
        }

        const handleSaveApiKey = () => {
          saveAPIKey(tiingoKey)
          setApiKeyVisible(false)
          showToast("Tiingo API key saved successfully! Market data will now use real data.", "success")
        }

        const currencySymbol = SUPPORTED_CURRENCIES.find((c) => c.value === config.currency)?.symbol || "$"

        const TiingoApiConfigSection = () => {
          const [isTestingConnection, setIsTestingConnection] = useState(false)
          const [connectionStatus, setConnectionStatus] = useState(null)

          const testConnection = async () => {
            setIsTestingConnection(true)
            setConnectionStatus(null)

            try {
              const success = await testTiingoConnection()
              setConnectionStatus(success ? 'success' : 'error')
              if (success) {
                showToast("✅ Tiingo API connection successful!", "success")
              } else {
                showToast("❌ Tiingo API connection failed", "error")
              }
            } catch (error) {
              setConnectionStatus('error')
              showToast("❌ Connection test failed", "error")
            } finally {
              setIsTestingConnection(false)
            }
          }

          return React.createElement(
            "div",
            { className: "card p-4 mb-4" },
            React.createElement(
              "div",
              { className: "flex items-center justify-between mb-3" },
              React.createElement(
                "h3",
                { className: "text-lg font-semibold flex items-center gap-2" },
                React.createElement("i", { className: "fas fa-key text-blue-500" }),
                "Tiingo API Configuration",
                hasTiingoAPIKey() && React.createElement(
                  "span",
                  { className: "text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full" },
                  "✓ Configured"
                )
              ),
              React.createElement(
                "div",
                { className: "flex gap-2" },
                hasTiingoAPIKey() && React.createElement(
                  "button",
                  {
                    onClick: testConnection,
                    disabled: isTestingConnection,
                    className: "btn btn-ghost px-3 py-1 text-sm",
                  },
                  isTestingConnection ? React.createElement("i", { className: "fas fa-spinner fa-spin" }) : React.createElement("i", { className: "fas fa-plug" }),
                  " Test"
                ),
                React.createElement(
                  "button",
                  {
                    onClick: () => setApiKeyVisible(!apiKeyVisible),
                    className: "btn btn-secondary px-3 py-1 text-sm",
                  },
                  apiKeyVisible ? "Hide" : "Configure API",
                ),
              ),
            ),

            apiKeyVisible &&
              React.createElement(
                "div",
                { className: "space-y-3" },
                React.createElement(
                  "div",
                  { className: "bg-blue-50 p-3 rounded-lg" },
                  React.createElement(
                    "h4",
                    { className: "font-medium text-blue-900 mb-2 text-sm" },
                    "Get Free Tiingo API Key",
                  ),
                  React.createElement(
                    "p",
                    { className: "text-sm text-blue-700 mb-2" },
                    "Add your free Tiingo API key to get real-time financial data:",
                  ),
                  React.createElement(
                    "a",
                    {
                      href: "https://api.tiingo.com/",
                      target: "_blank",
                      className: "text-blue-600 hover:underline text-sm inline-flex items-center gap-1",
                    },
                    React.createElement("i", { className: "fas fa-external-link-alt" }),
                    "Get your free Tiingo API key (supports 1000+ requests per hour)",
                  ),
                ),

                React.createElement(
                  "div",
                  { className: "form-group" },
                  React.createElement("label", { className: "form-label" }, "Tiingo API Key"),
                  React.createElement("input", {
                    type: "password",
                    className: "input-field",
                    placeholder: "Enter your Tiingo API key",
                    value: tiingoKey === "" ? "" : tiingoKey,
                    onChange: (e) => setTiingoKey(e.target.value),
                  }),
                ),

                React.createElement(
                  "div",
                  { className: "flex gap-2" },
                  React.createElement(
                    "button",
                    {
                      onClick: handleSaveApiKey,
                      className: "btn btn-primary px-3 py-1 text-sm",
                    },
                    "Save API Key",
                  ),
                  React.createElement(
                    "button",
                    {
                      onClick: () => {
                        setTiingoKey("")
                        localStorage.removeItem("tiingoKey")
                        API_CONFIG.TIINGO_KEY = ""
                        showToast("Tiingo API key cleared. Market Data tab will be disabled.", "info")
                      },
                      className: "btn btn-secondary px-3 py-1 text-sm",
                    },
                    "Clear Key",
                  ),
                ),
              ),
            )
        }

        return React.createElement(
          "div",
          { className: "fade-in" },
          React.createElement(TiingoApiConfigSection),
          React.createElement(
            "div",
            { className: "card p-4 mb-4" },
            React.createElement("h3", { className: "text-lg font-semibold mb-4" }, "Personal Information"),
            React.createElement(
              "div",
              { className: "form-grid" },
              React.createElement(InputField, {
                label: "Current Age",
                field: "currentAge",
                suffix: "years",
                min: 18,
                max: 100,
              }),
              React.createElement(InputField, {
                label: "Retirement Age",
                field: "retirementAge",
                suffix: "years",
                min: 18,
                max: 100,
              }),
            ),
          ),
          React.createElement(
            "div",
            { className: "card p-4 mb-4" },
            React.createElement("h3", { className: "text-lg font-semibold mb-4" }, "Financial Details"),
            React.createElement(
              "div",
              { className: "form-grid" },
              React.createElement(InputField, {
                label: "Current Savings",
                field: "currentSavings",
                prefix: currencySymbol,
                min: 0,
              }),
              React.createElement(InputField, {
                label: "Monthly Contribution",
                field: "monthlySavings",
                prefix: currencySymbol,
                min: 0,
              }),
              React.createElement(InputField, {
                label: "Expected Annual Return",
                field: "annualReturn",
                suffix: "%",
                min: 0,
                max: 30,
                step: 0.5,
                tooltip: "S&P 500 historical average is ~10%. A conservative estimate is 5-7% after inflation.",
              }),
              React.createElement(InputField, {
                label: "Monthly Expenses",
                field: "monthlyExpenses",
                prefix: currencySymbol,
                min: 0,
              }),
              React.createElement(InputField, {
                label: "Safe Withdrawal Rate",
                field: "safeWithdrawalRate",
                suffix: "%",
                min: 1,
                max: 10,
                step: 0.1,
                tooltip: "The 4% rule is traditional, but 3-3.5% is more conservative for early retirement.",
              }),
              React.createElement(InputField, {
                label: "Inflation Rate",
                field: "inflationRate",
                suffix: "%",
                min: 0,
                max: 10,
                step: 0.1,
                tooltip: "Historical US inflation average is around 2-3%.",
              }),
            ),
          ),
          React.createElement(
            "div",
            { className: "card p-4 border-red-200 bg-red-50" },
            React.createElement("h3", { className: "text-lg font-semibold mb-3 text-red-800" }, "Reset Settings"),
            React.createElement(
              "p",
              { className: "text-red-700 mb-3 text-sm" },
              "This will reset all your settings to default values. This action cannot be undone.",
            ),
            showConfirm
              ? React.createElement(
                  "div",
                  { className: "flex gap-2" },
                  React.createElement(
                    "button",
                    {
                      onClick: handleReset,
                      className: "btn text-white px-4 py-1 text-sm rounded-lg font-medium bg-red-500 hover:bg-red-600",
                    },
                    "Yes, Reset All",
                  ),
                  React.createElement(
                    "button",
                    {
                      onClick: () => setShowConfirm(false),
                      className: "btn btn-secondary px-4 py-1 text-sm",
                    },
                    "Cancel",
                  ),
                )
              : React.createElement(
                  "button",
                  {
                    onClick: handleReset,
                    className: "btn text-white px-4 py-1 text-sm rounded-lg font-medium bg-red-500 hover:bg-red-600",
                  },
                  "Reset All Settings",
                ),
          ),
        )
      }

      function MainApp() {
        // Load saved tab from localStorage
        const [activeTab, setActiveTab] = useState(() => {
          const saved = localStorage.getItem("activeTab")
          return saved || "dashboard"
        })

        const [notification, setNotification] = useState(null)
        const { config } = useConfig()
        const prevCurrency = useRef(config.currency)

        // Add event listener for tab switching
        useEffect(() => {
          const handleTabSwitch = (event) => {
            const targetTab = event.detail
            if (tabs.find(tab => tab.id === targetTab)) {
              setActiveTab(targetTab)
            }
          }

          window.addEventListener('switchTab', handleTabSwitch)
          return () => {
            window.removeEventListener('switchTab', handleTabSwitch)
          }
        }, [])

        // Save active tab to localStorage whenever it changes
        useEffect(() => {
          localStorage.setItem("activeTab", activeTab)
          localStorage.setItem("lastActiveTab", activeTab)

          // Update page title based on active tab
          const tabNames = {
            dashboard: "Dashboard",
            calculator: "Calculator",
            simulation: "Simulation",
            guide: "Guides",
            market: "Market Data",
            settings: "Settings",
          }
          document.title = `Financial Atlas - ${
            tabNames[activeTab] || "Your Financial Independence & Retirement Planner"
          }`
        }, [activeTab])

        useEffect(() => {
          if (prevCurrency.current !== config.currency && prevCurrency.current) {
            setNotification({
              message: `Currency changed to ${config.currency}. Values have been automatically converted.`,
              type: "success",
            })
            setTimeout(() => setNotification(null), 4000)
          }
          prevCurrency.current = config.currency
        }, [config.currency])

        const tabs = [
          { id: "dashboard", label: "Dashboard", icon: "home" },
          ...(hasTiingoAPIKey() ? [{ id: "market", label: "Market Data", icon: "chart-area" }] : []),
          { id: "guide", label: "Guides", icon: "book-open" },
          { id: "settings", label: "Settings", icon: "cog" },
        ]

        // Add event listener for tab switching
        useEffect(() => {
          const handleTabSwitch = (event) => {
            const targetTab = event.detail
            if (tabs.find(tab => tab.id === targetTab)) {
              setActiveTab(targetTab)
            }
          }

          window.addEventListener('switchTab', handleTabSwitch)
          return () => {
            window.removeEventListener('switchTab', handleTabSwitch)
          }
        }, [tabs])

        const renderContent = () => {
          // Redirect to dashboard if on market tab but no API key
          if (activeTab === "market" && !hasTiingoAPIKey()) {
            setActiveTab("dashboard")
            return React.createElement(Dashboard)
          }

          switch (activeTab) {
            case "dashboard":
              return React.createElement(Dashboard)
            case "market":
              return hasTiingoAPIKey() ? React.createElement(MarketData) : React.createElement(Dashboard)
            case "guide":
              return React.createElement(Guide)
            case "settings":
              return React.createElement(Settings)
            default:
              return React.createElement(Dashboard)
          }
        }

        return React.createElement(
          "div",
          { className: "min-h-screen bg-gray-50 relative" },
          React.createElement(Header),
          notification &&
            React.createElement(
              "div",
              {
                className: `fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg border ${
                  notification.type === "success"
                    ? "bg-green-50 border-green-200 text-green-800"
                    : "bg-blue-50 border-blue-200 text-blue-800"
                } slide-in`,
              },
              React.createElement(
                "div",
                { className: "flex items-center gap-2" },
                React.createElement("i", { className: "fas fa-check-circle" }),
                React.createElement("span", null, notification.message),
              ),
            ),
          React.createElement(
            "main",
            { className: "container py-6" },
            React.createElement(TabNavigation, { activeTab, setActiveTab, tabs }),
            renderContent(),
          ),
        )
      }

      // Render the app
      const root = ReactDOM.createRoot(document.getElementById("root"))
      root.render(React.createElement(ConfigProvider, null, React.createElement(MainApp)))
    </script>
  </body>
</html>
